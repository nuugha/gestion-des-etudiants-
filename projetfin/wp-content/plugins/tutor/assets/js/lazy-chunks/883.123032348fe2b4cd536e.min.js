"use strict";(self["webpackChunktutor"]=self["webpackChunktutor"]||[]).push([[883],{7301:(t,e,r)=>{r.d(e,{$:()=>h,S:()=>v});var n=r(7363);var o=r.n(n);var i=r(7536);var a=r(917);function u(t,e){return f(t)||d(t,e)||c(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(!t)return;if(typeof t==="string")return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}function l(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function f(t){if(Array.isArray(t))return t}var p=(0,n.createContext)(null);var v=function t(){var e=(0,n.useContext)(p);if(!e){throw new Error("useQuizModalContext must be used within a QuizModalContextProvider")}return e};var h=function t(e){var r=e.children,o=e.quizId,s=e.contentType,c=e.validationError;var l=(0,n.useState)(""),d=u(l,2),f=d[0],v=d[1];var h=(0,i.Gc)();var y=h.watch("questions")||[];var _=(0,n.useRef)(y);var m=(0,n.useState)(c||null),g=u(m,2),b=g[0],w=g[1];var Z=y.findIndex((function(t){return t.question_id===f}));(0,n.useEffect)((function(){if(y.length===0){v("")}else if(_.current.length!==0&&_.current.length<y.length){var t=y.find((function(t){return!_.current.some((function(e){return String(e.question_id)===String(t.question_id)}))}));v((t===null||t===void 0?void 0:t.question_id)||"")}else if(Z===-1){v(y[0].question_id)}_.current=y}),[y.length]);(0,n.useEffect)((function(){if(Z===-1&&f){v("")}}),[Z,f]);return(0,a.tZ)(p.Provider,{value:{activeQuestionIndex:Z,activeQuestionId:f,setActiveQuestionId:v,quizId:o,validationError:b,setValidationError:w,contentType:s}},typeof r==="function"?r({activeQuestionIndex:Z,activeQuestionId:f,setActiveQuestionId:v,setValidationError:w}):r)}},9500:(t,e,r)=>{r.r(e);r.d(e,{default:()=>La});var n=r(9752);var o=r(2339);var i=r(5587);var a=r(917);var u=r(8003);var s=r(7363);var c=r(1533);var l=r(9250);var d=r(74);var f=r(5033);var p=r(6595);var v=r(96);var h=r(4285);var y=r(2329);var _=r(7536);var m=r(2798);var g=r(3389);var b=r(9592);var w=r(4900);var Z=r(8877);var O=r(9612);var x=r(7619);var q=r(932);var S=r(7100);var E=r(202);var j=r(7941);var P=r(5453);var k=r(9768);var T=r(1162);var A=r(8777);var z=r(6764);var I=r(9528);var D=r(178);var C=r(8305);var L=r(6413);var W=r(1537);var N=r(5460);var Q=r(5589);var J=r(7034);var F=r(2377);var U=r(5219);var G=r(9169);var R=r(7363);function M(t){"@babel/helpers - typeof";return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function B(){B=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return B.apply(this,arguments)}function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){Y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Y(t,e,r){e=$(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function $(t){var e=K(t,"string");return M(e)==="symbol"?e:String(e)}function K(t,e){if(M(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(M(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function X(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */X=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new q(o||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(S([])));_&&_!==e&&r.call(_,i)&&(h=_);var m=v.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,i,a,u){var s=l(t[n],t,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==M(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){o(r,n,t,e)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),s(m,u,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,q.prototype={constructor:q,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function o(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function t(e,n){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function tt(t,e,r,n,o,i,a){try{var u=t[i](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,o)}}function et(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tt(i,n,o,a,u,"next",t)}function u(t){tt(i,n,o,a,u,"throw",t)}a(undefined)}))}}var rt=(0,J.zs)();var nt=[{label:(0,u.__)("Weeks","tutor"),value:"weeks"},{label:(0,u.__)("Days","tutor"),value:"days"},{label:(0,u.__)("Hours","tutor"),value:"hours"}];var ot=function t(e){var r;var n=e.assignmentId,o=n===void 0?"":n,i=e.topicId,c=e.closeModal,l=e.icon,v=e.title,h=e.subtitle,y=e.contentDripType;var m=!!C.y.tutor_pro_url;var g=((r=C.y.settings)===null||r===void 0?void 0:r.chatgpt_enable)==="on";var b=(0,Q.T3)(o,i);var Z=(0,Q.CR)(rt);var O=(0,E.NL)();var x=b.data;var q=O.getQueryData(["Topic",rt]);var S=(0,F.O)({defaultValues:{title:"",summary:"",attachments:[],time_duration:{value:"0",time:"weeks"},total_mark:10,pass_mark:5,upload_files_limit:1,upload_file_size_limit:2,content_drip_settings:{unlock_date:"",after_xdays_of_enroll:"",prerequisites:[]}},shouldFocusError:true,mode:"onChange"});var W=S.formState.isDirty;(0,s.useEffect)((function(){if(x){var t,e,r;S.reset({title:x.post_title||"",summary:(0,U.qH)(x.post_content)||"",attachments:x.attachments||[],time_duration:{value:x.assignment_option.time_duration.value||"0",time:x.assignment_option.time_duration.time||"weeks"},total_mark:x.assignment_option.total_mark||10,pass_mark:x.assignment_option.pass_mark||5,upload_files_limit:x.assignment_option.upload_files_limit||1,upload_file_size_limit:x.assignment_option.upload_file_size_limit||2,content_drip_settings:{unlock_date:(x===null||x===void 0?void 0:(t=x.content_drip_settings)===null||t===void 0?void 0:t.unlock_date)||"",after_xdays_of_enroll:(x===null||x===void 0?void 0:(e=x.content_drip_settings)===null||e===void 0?void 0:e.after_xdays_of_enroll)||"",prerequisites:(x===null||x===void 0?void 0:(r=x.content_drip_settings)===null||r===void 0?void 0:r.prerequisites)||[]}},{keepDirty:false})}var n=setTimeout((function(){S.setFocus("title")}),0);return function(){clearTimeout(n)}}),[x]);var N=function(){var t=et(X().mark((function t(e){var r,n;return X().wrap((function t(a){while(1)switch(a.prev=a.next){case 0:r=(0,Q.iL)(e,o,i,y);a.next=3;return Z.mutateAsync(r);case 3:n=a.sent;if(n.status_code===200||n.status_code===201){c({action:"CONFIRM"})}case 5:case"end":return a.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();return(0,a.tZ)(D.Z,{onClose:function t(){return c({action:"CLOSE"})},icon:W?(0,a.tZ)(p.Z,{name:"warning",width:24,height:24}):l,title:W?(0,u.__)("Unsaved Changes","tutor"):v,subtitle:h,maxWidth:1070,actions:W&&(0,a.tZ)(R.Fragment,null,(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){if(o){S.reset()}else{c({action:"CLOSE"})}}},o?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{loading:Z.isPending,variant:"primary",size:"small",onClick:S.handleSubmit(N)},o?(0,u.__)("Update","tutor"):(0,u.__)("Save","tutor")))},(0,a.tZ)("div",{css:at.wrapper},(0,a.tZ)(w.Z,{when:!b.isLoading,fallback:(0,a.tZ)(f.fz,null)},(0,a.tZ)("div",null,(0,a.tZ)("div",{css:at.assignmentInfo},(0,a.tZ)(_.Qr,{name:"title",control:S.control,rules:H({required:(0,u.__)("Assignment title is required","tutor")},(0,G.T9)(255)),render:function t(e){return(0,a.tZ)(k.Z,B({},e,{label:(0,u.__)("Title","tutor"),placeholder:(0,u.__)("Enter Assignment Title","tutor"),generateWithAi:!m||g,isClearable:true,selectOnFocus:true}))}}),(0,a.tZ)(_.Qr,{name:"summary",control:S.control,render:function t(e){return(0,a.tZ)(I.Z,B({},e,{label:(0,u.__)("Content","tutor"),placeholder:(0,u.__)("Enter Assignment Content","tutor"),generateWithAi:!m||g}))}}))),(0,a.tZ)("div",{css:at.rightPanel},(0,a.tZ)(_.Qr,{name:"attachments",control:S.control,render:function t(e){return(0,a.tZ)(P.Z,B({},e,{label:(0,u.__)("Attachments","tutor"),buttonText:(0,u.__)("Upload Attachment","tutor"),selectMultiple:true}))}}),(0,a.tZ)(w.Z,{when:(0,J.ro)(L.AO.CONTENT_DRIP)},(0,a.tZ)(w.Z,{when:y==="specific_days"},(0,a.tZ)(_.Qr,{name:"content_drip_settings.after_xdays_of_enroll",control:S.control,render:function t(e){return(0,a.tZ)(k.Z,B({},e,{type:"number",label:(0,a.tZ)("div",{css:at.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This assignment will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.tZ)(w.Z,{when:y==="unlock_by_date"},(0,a.tZ)(_.Qr,{name:"content_drip_settings.unlock_date",control:S.control,render:function t(e){return(0,a.tZ)(j.Z,B({},e,{label:(0,a.tZ)("div",{css:at.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This assignment will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.tZ)(w.Z,{when:y==="after_finishing_prerequisites"},(0,a.tZ)(_.Qr,{name:"content_drip_settings.prerequisites",control:S.control,render:function t(e){return(0,a.tZ)(z.Z,B({},e,{label:(0,a.tZ)("div",{css:at.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:q.reduce((function(t,e){if(e.id===i){t.push(H(H({},e),{},{contents:e.contents.filter((function(t){return t.ID!==o}))}))}else{t.push(e)}return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))),(0,a.tZ)("div",{css:at.timeLimit},(0,a.tZ)(_.Qr,{name:"time_duration.value",control:S.control,render:function t(e){return(0,a.tZ)(k.Z,B({},e,{type:"number",label:(0,u.__)("Time Limit","tutor"),placeholder:"0",dataAttribute:"data-time-limit",selectOnFocus:true}))}}),(0,a.tZ)(_.Qr,{name:"time_duration.time",control:S.control,render:function t(e){return(0,a.tZ)(A.Z,B({},e,{options:nt,removeOptionsMinWidth:true,dataAttribute:"data-time-limit-unit"}))}})),(0,a.tZ)(_.Qr,{name:"total_mark",control:S.control,render:function t(e){return(0,a.tZ)(k.Z,B({},e,{type:"number",label:(0,u.__)("Total Points","tutor"),placeholder:"0",selectOnFocus:true}))}}),(0,a.tZ)(_.Qr,{name:"pass_mark",control:S.control,rules:{validate:function t(e){if(Number(e)>Number(S.getValues("total_mark"))){return(0,u.__)("Pass mark cannot be greater than total mark","tutor")}return true}},render:function t(e){return(0,a.tZ)(k.Z,B({},e,{type:"number",label:(0,u.__)("Minimum Pass Points","tutor"),placeholder:"0",selectOnFocus:true}))}}),(0,a.tZ)(_.Qr,{name:"upload_files_limit",control:S.control,render:function t(e){return(0,a.tZ)(k.Z,B({},e,{placeholder:"0",type:"number",label:(0,u.__)("File Upload Limit","tutor"),helpText:(0,u.__)("Define the number of files that a student can upload in this assignment. Input 0 to disable the option to upload.","tutor"),selectOnFocus:true}))}}),(0,a.tZ)(_.Qr,{name:"upload_file_size_limit",control:S.control,render:function t(e){return(0,a.tZ)(T.Z,B({},e,{type:"number",label:(0,u.__)("Maximum File Size Limit","tutor"),placeholder:"0",content:(0,u.__)("MB","tutor"),contentPosition:"right"}))}})))))};const it=ot;var at={wrapper:(0,a.iv)("width:1070px;margin:0 auto;display:grid;grid-template-columns:1fr 338px;height:100%;padding-inline:",W.W0[32],";"+(true?"":0),true?"":0),assignmentInfo:(0,a.iv)("padding-block:",W.W0[24],";padding-right:",W.W0[32],";display:flex;flex-direction:column;gap:",W.W0[24],";position:sticky;top:0;z-index:",W.W5.positive,";"+(true?"":0),true?"":0),rightPanel:(0,a.iv)("border-left:1px solid ",W.Jv.stroke.divider,";display:flex;flex-direction:column;gap:",W.W0[16],";padding-block:",W.W0[24],";padding-left:",W.W0[32],";"+(true?"":0),true?"":0),timeLimit:(0,a.iv)("display:grid;align-items:end;grid-template-columns:1fr 100px;& input{border:1px solid ",W.Jv.stroke["default"],";&[data-time-limit]{border-radius:",W.E0[6]," 0 0 ",W.E0[6],";border-right:none;&:focus{border-right:1px solid ",W.Jv.stroke["default"],";z-index:",W.W5.positive,";}}&[data-time-limit-unit]{border-radius:0 ",W.E0[6]," ",W.E0[6]," 0;}}"+(true?"":0),true?"":0),uploadAttachment:(0,a.iv)("display:flex;flex-direction:column;gap:",W.W0[8],";"+(true?"":0),true?"":0),uploadLabel:(0,a.iv)(N.c.body()," color:",W.Jv.text.title,";"+(true?"":0),true?"":0),contentDripLabel:(0,a.iv)("display:flex;align-items:center;svg{margin-right:",W.W0[4],";color:",W.Jv.icon.success,";}"+(true?"":0),true?"":0)};var ut=r(5043);var st=r(4857);var ct=r(5216);var lt=r(4436);var dt=r(125);var ft=r(9546);var pt=r(1060);var vt=r(5056);var ht=r(6074);var yt=r(5130);var _t=r(5340);function mt(){mt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return mt.apply(this,arguments)}function gt(t){return Zt(t)||wt(t)||qt(t)||bt()}function bt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wt(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zt(t){if(Array.isArray(t))return St(t)}function Ot(t,e){return jt(t)||Et(t,e)||qt(t,e)||xt()}function xt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qt(t,e){if(!t)return;if(typeof t==="string")return St(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(t,e)}function St(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Et(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function jt(t){if(Array.isArray(t))return t}function Pt(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var kt=function t(e){var r=e.title,n=e.closeModal,o=e.onAddContent,i=e.contentType,c=e.addedContentIds,l=c===void 0?[]:c;var f=(0,F.O)({defaultValues:{search:""}});var v=(0,_t.N)(f.watch("search"),300);var h=(0,yt.HD)(v,i);var y=(0,Q.ri)(v,i);var m=(0,s.useState)([]),g=Ot(m,2),b=g[0],Z=g[1];var O=i==="tutor_h5p_quiz"?h.data:y.data;var x=O===null||O===void 0?void 0:O.output.filter((function(t){return!l.includes(String(t.id))}));var q=[{Header:(0,a.tZ)("div",{"data-index":true,css:At.tableLabel},x!==null&&x!==void 0&&x.length?(0,a.tZ)(ht.Z,{onChange:function t(e){if(e){Z((x===null||x===void 0?void 0:x.filter((function(t){return!l.includes(String(t.id))})))||[])}else{Z([])}},checked:b.length===((x===null||x===void 0?void 0:x.filter((function(t){return!l.includes(String(t.id))})))||[]).length,isIndeterminate:b.length>0&&b.length<((x===null||x===void 0?void 0:x.filter((function(t){return!l.includes(String(t.id))})))||[]).length}):"#"),Cell:function t(e,r){return(0,a.tZ)("div",{css:N.c.caption()},(0,a.tZ)(ht.Z,{onChange:function t(r){if(r){Z([].concat(gt(b),[e]))}else{Z(b.filter((function(t){return t.id!==e.id})))}},checked:b.map((function(t){return t.id})).includes(e.id)&&!l.includes(String(e.id))}))}},{Header:(0,a.tZ)("div",{css:At.tableLabel},(0,u.__)("Title","tutor")),Cell:function t(e){return(0,a.tZ)("div",{css:At.title},e.title)}},{Header:(0,a.tZ)("div",{css:At.tableLabel},(0,u.__)("Content Type","tutor")),Cell:function t(e){return(0,a.tZ)("div",{css:N.c.caption()},e.content_type)}},{Header:(0,a.tZ)("div",{css:At.tableLabel},(0,u.__)("Created At","tutor")),Cell:function t(e){return(0,a.tZ)("div",{css:N.c.caption()},(0,ft["default"])(new Date(e.updated_at),L.E_.yearMonthDayHourMinuteSecond))}}];(0,s.useEffect)((function(){document.body.style.overflow="hidden";return function(){document.body.style.overflow="auto"}}),[]);return(0,a.tZ)(vt.Z,{title:b.length>0?(0,u.sprintf)((0,u.__)("%s  selected","tutor"),b.length):r,onClose:function t(){return n({action:"CLOSE"})}},(0,a.tZ)("div",{css:At.modalWrapper},(0,a.tZ)("div",{css:At.searchWrapper},(0,a.tZ)(_.Qr,{control:f.control,name:"search",render:function t(e){return(0,a.tZ)(T.Z,mt({},e,{placeholder:(0,u.__)("Search by title","tutor"),showVerticalBar:false,content:(0,a.tZ)(p.Z,{name:"search",width:24,height:24})}))}})),(0,a.tZ)("div",{css:At.tableWrapper},(0,a.tZ)(pt.Z,{columns:q,data:x||[],loading:h.isLoading||y.isLoading})),(0,a.tZ)(w.Z,{when:x===null||x===void 0?void 0:x.length},(0,a.tZ)("div",{css:At.footer},(0,a.tZ)(d.Z,{size:"small",variant:"text",onClick:function t(){return n({action:"CLOSE"})}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{type:"submit",size:"small",variant:"primary",onClick:function t(){o(b);n({action:"CONFIRM"})},disabled:!b.length},(0,u.__)("Add","tutor"))))))};const Tt=kt;var At={modalWrapper:true?{name:"tc3qxv",styles:"width:920px"}:0,searchWrapper:(0,a.iv)("display:flex;padding:",W.W0[20],";"+(true?"":0),true?"":0),tableWrapper:(0,a.iv)("max-height:calc(100vh - 350px);overflow:auto;tr{td:first-of-type{padding-left:",W.W0[20],";}td:last-of-type{padding-right:",W.W0[20],";}}"+(true?"":0),true?"":0),tableLabel:(0,a.iv)(N.c.body("medium"),";text-align:left;color:",W.Jv.text.primary,";&[data-index]{padding-left:",W.W0[4],";}"+(true?"":0),true?"":0),title:(0,a.iv)(dt.i.text.ellipsis(2)," width:100%;text-align:left;",N.c.caption(),";min-width:340px;max-width:400px;"+(true?"":0),true?"":0),footer:(0,a.iv)("box-shadow:",W.AF.dividerTop,";height:56px;display:flex;align-items:center;justify-content:end;gap:",W.W0[16],";padding-inline:",W.W0[16],";"+(true?"":0),true?"":0)};var zt=r(7363);function It(t){"@babel/helpers - typeof";return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Dt(){Dt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Dt.apply(this,arguments)}function Ct(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(r),!0).forEach((function(e){Wt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wt(t,e,r){e=Nt(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Nt(t){var e=Qt(t,"string");return It(e)==="symbol"?e:String(e)}function Qt(t,e){if(It(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(It(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jt(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Jt=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new q(o||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(S([])));_&&_!==e&&r.call(_,i)&&(h=_);var m=v.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,i,a,u){var s=l(t[n],t,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==It(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){o(r,n,t,e)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),s(m,u,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,q.prototype={constructor:q,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function o(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function t(e,n){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function Ft(t,e,r,n,o,i,a){try{var u=t[i](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,o)}}function Ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ft(i,n,o,a,u,"next",t)}function u(t){Ft(i,n,o,a,u,"throw",t)}a(undefined)}))}}function Gt(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Rt=(0,J.zs)();var Mt=function t(e){var r,n;var o=e.lessonId,i=o===void 0?"":o,c=e.topicId,l=e.closeModal,v=e.icon,h=e.title,y=e.subtitle,g=e.contentDripType;var Z=!!C.y.tutor_pro_url;var O=((r=C.y.settings)===null||r===void 0?void 0:r.chatgpt_enable)==="on";var x=C.y.enable_lesson_classic_editor==="1";var q=((n=C.y.settings)===null||n===void 0?void 0:n.hide_admin_bar_for_users)==="off";var S=C.y.current_user.roles.includes(L.er.ADMINISTRATOR);var A=C.y.current_user.roles.includes(L.er.TUTOR_INSTRUCTOR);var W=x&&(S||A&&q);var N=(0,Q.yO)(i,c);var R=(0,Q.G4)(Rt);var M=(0,E.NL)();var B=(0,b.d)(),V=B.showModal;var H=N.data,Y=N.isLoading;var $=M.getQueryData(["Topic",Rt]);var K=(0,F.O)({defaultValues:{title:"",description:"",thumbnail:null,tutor_attachments:[],lesson_preview:false,video:null,duration:{hour:0,minute:0,second:0},content_drip_settings:{unlock_date:"",after_xdays_of_enroll:"",prerequisites:[]}},shouldFocusError:true,mode:"onChange"});var X=K.formState.isDirty;(0,s.useEffect)((function(){if(H&&!Y){var t,e,r,n,o,i;K.reset({title:H.post_title||"",description:(0,U.qH)(H.post_content)||"",thumbnail:{id:H.thumbnail_id?Number(H.thumbnail_id):0,title:"",url:H.thumbnail||""},tutor_attachments:H.attachments||[],lesson_preview:H.is_preview||false,video:H.video||null,duration:{hour:((t=H.video.runtime)===null||t===void 0?void 0:t.hours)||0,minute:((e=H.video.runtime)===null||e===void 0?void 0:e.minutes)||0,second:((r=H.video.runtime)===null||r===void 0?void 0:r.seconds)||0},content_drip_settings:{unlock_date:(H===null||H===void 0?void 0:(n=H.content_drip_settings)===null||n===void 0?void 0:n.unlock_date)||"",after_xdays_of_enroll:(H===null||H===void 0?void 0:(o=H.content_drip_settings)===null||o===void 0?void 0:o.after_xdays_of_enroll)||"",prerequisites:(H===null||H===void 0?void 0:(i=H.content_drip_settings)===null||i===void 0?void 0:i.prerequisites)||[]}})}var a=document.querySelector(".button.insert-media.add_media");var u=document.querySelector(".add-h5p-content-button");if(a&&u){a.after(u)}var s=setTimeout((function(){K.setFocus("title")}),0);return function(){clearTimeout(s)}}),[H,Y]);var tt=function(){var t=Ut(Jt().mark((function t(e){var r,n;return Jt().wrap((function t(o){while(1)switch(o.prev=o.next){case 0:r=(0,Q.SF)(e,i,c,g);o.next=3;return R.mutateAsync(r);case 3:n=o.sent;if(n.data){l({action:"CONFIRM"})}case 5:case"end":return o.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var et=function t(){var e=K.getValues("description");var r=e.match(/\[h5p id="(\d+)"\]/g)||[];var n=r.map((function(t){var e;var r=((e=t.match(/\[h5p id="(\d+)"\]/))===null||e===void 0?void 0:e[1])||"";return String(r)}));var o=function t(r){var n=function t(e){return'[h5p id="'.concat(e.id,'"]')};var o=r.map(n);K.setValue("description","".concat(e,"\n").concat(o.join("\n")),{shouldDirty:true})};V({component:Tt,props:{title:(0,u.__)("Select H5P Content","tutor"),onAddContent:o,contentType:"lesson",addedContentIds:n}})};return(0,a.tZ)(D.Z,{onClose:function t(){return l({action:"CLOSE"})},icon:X?(0,a.tZ)(p.Z,{name:"warning",width:24,height:24}):v,title:X?(0,u.__)("Unsaved Changes","tutor"):h,subtitle:y,maxWidth:1070,actions:X&&(0,a.tZ)(zt.Fragment,null,(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){if(i){K.reset()}else{l({action:"CLOSE"})}}},i?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{loading:R.isPending,variant:"primary",size:"small",onClick:K.handleSubmit(tt)},i?(0,u.__)("Update","tutor"):(0,u.__)("Save","tutor")))},(0,a.tZ)("div",{css:Vt.wrapper},(0,a.tZ)(w.Z,{when:!N.isLoading,fallback:(0,a.tZ)(f.fz,null)},(0,a.tZ)("div",null,(0,a.tZ)("div",{css:Vt.lessonInfo},(0,a.tZ)(_.Qr,{name:"title",control:K.control,rules:Lt({required:(0,u.__)("Lesson title is required.","tutor")},(0,G.T9)(255)),render:function t(e){return(0,a.tZ)(k.Z,Dt({},e,{label:(0,u.__)("Name","tutor"),placeholder:(0,u.__)("Enter Lesson Name","tutor"),generateWithAi:!Z||O,selectOnFocus:true,isClearable:true}))}}),(0,a.tZ)("div",{css:Vt.description},(0,a.tZ)(_.Qr,{name:"description",control:K.control,render:function t(e){return(0,a.tZ)(I.Z,Dt({},e,{label:(0,a.tZ)("div",{css:Vt.descriptionLabel},(0,u.__)("Content","tutor"),(0,a.tZ)(w.Z,{when:W},(0,a.tZ)(ut.Z,{content:(0,u.__)("Save the lesson first to use the WP Editor.","tutor"),delay:200,disabled:!!i},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){window.open("".concat(C.y.site_url,"/wp-admin/post.php?post=").concat(i,"&action=edit"),"_blank","noopener")},icon:(0,a.tZ)(p.Z,{name:"edit",width:24,height:24}),buttonCss:Vt.wpEditorButton,disabled:!i},(0,u.__)("WP Editor","tutor"))))),placeholder:(0,u.__)("Enter Lesson Description","tutor"),generateWithAi:!Z||O}))}}),(0,a.tZ)(w.Z,{when:Z&&(0,J.ro)(L.AO.H5P_INTEGRATION),fallback:(0,a.tZ)(w.Z,{when:!Z},(0,a.tZ)("button",{css:Vt.addH5PContentButton({isPro:false}),type:"reset",className:"add-h5p-content-button",disabled:true},(0,a.tZ)(m.Z,null,(0,a.tZ)("div",{"data-button-text":true},(0,u.__)("Add H5P Content","tutor")))))},(0,a.tZ)("button",{className:"add-h5p-content-button",css:Vt.addH5PContentButton,type:"button",onClick:et},(0,u.__)("Add H5P Content","tutor")))))),(0,a.tZ)("div",{css:Vt.rightPanel},(0,a.tZ)(_.Qr,{name:"thumbnail",control:K.control,render:function t(e){return(0,a.tZ)(st.Z,Dt({},e,{label:(0,u.__)("Featured Image","tutor"),buttonText:(0,u.__)("Upload Image","tutor"),infoText:(0,u.sprintf)((0,u.__)("JPEG, PNG, GIF, and WebP formats, up to %s","tutor"),C.y.max_upload_size)}))}}),(0,a.tZ)(_.Qr,{name:"video",control:K.control,render:function t(e){return(0,a.tZ)(lt.Z,Dt({},e,{label:(0,u.__)("Video","tutor"),buttonText:(0,u.__)("Upload Video","tutor"),infoText:(0,u.sprintf)((0,u.__)("MP4, and WebM formats, up to %s","tutor"),C.y.max_upload_size),onGetDuration:function t(e){K.setValue("duration.hour",e.hours);K.setValue("duration.minute",e.minutes);K.setValue("duration.second",e.seconds)}}))}}),(0,a.tZ)("div",{css:Vt.durationWrapper},(0,a.tZ)("span",{css:Vt.additionLabel},(0,u.__)("Video Playback Time","tutor")),(0,a.tZ)("div",{css:Vt.duration},(0,a.tZ)(_.Qr,{name:"duration.hour",control:K.control,render:function t(e){return(0,a.tZ)(T.Z,Dt({},e,{type:"number",content:(0,a.tZ)("span",{css:Vt.durationContent},(0,u.__)("hour","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}),(0,a.tZ)(_.Qr,{name:"duration.minute",control:K.control,render:function t(e){return(0,a.tZ)(T.Z,Dt({},e,{type:"number",content:(0,a.tZ)("span",{css:Vt.durationContent},(0,u.__)("min","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}),(0,a.tZ)(_.Qr,{name:"duration.second",control:K.control,render:function t(e){return(0,a.tZ)(T.Z,Dt({},e,{type:"number",content:(0,a.tZ)("span",{css:Vt.durationContent},(0,u.__)("sec","tutor")),contentPosition:"right",placeholder:"0",showVerticalBar:false}))}}))),(0,a.tZ)(w.Z,{when:(0,J.ro)(L.AO.CONTENT_DRIP)},(0,a.tZ)(w.Z,{when:g==="specific_days"},(0,a.tZ)(_.Qr,{name:"content_drip_settings.after_xdays_of_enroll",control:K.control,render:function t(e){return(0,a.tZ)(k.Z,Dt({},e,{type:"number",label:(0,a.tZ)("div",{css:Vt.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This lesson will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.tZ)(w.Z,{when:g==="unlock_by_date"},(0,a.tZ)(_.Qr,{name:"content_drip_settings.unlock_date",control:K.control,render:function t(e){return(0,a.tZ)(j.Z,Dt({},e,{label:(0,a.tZ)("div",{css:Vt.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This lesson will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.tZ)(w.Z,{when:g==="after_finishing_prerequisites"},(0,a.tZ)(_.Qr,{name:"content_drip_settings.prerequisites",control:K.control,render:function t(e){return(0,a.tZ)(z.Z,Dt({},e,{label:(0,a.tZ)("div",{css:Vt.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:$.reduce((function(t,e){if(e.id===c){t.push(Lt(Lt({},e),{},{contents:e.contents.filter((function(t){return t.ID!==i}))}))}else{t.push(e)}return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))),(0,a.tZ)(_.Qr,{name:"tutor_attachments",control:K.control,render:function t(e){return(0,a.tZ)(P.Z,Dt({},e,{label:(0,u.__)("Exercise Files","tutor"),buttonText:(0,u.__)("Upload Attachment","tutor"),selectMultiple:true}))}}),(0,a.tZ)(w.Z,{when:!Z||(0,J.ro)(L.AO.TUTOR_COURSE_PREVIEW)},(0,a.tZ)("div",{css:Vt.lessonPreview},(0,a.tZ)(_.Qr,{name:"lesson_preview",control:K.control,render:function t(e){return(0,a.tZ)(ct.Z,Dt({},e,{disabled:!Z,label:(0,a.tZ)("div",{css:Vt.previewLabel},(0,u.__)("Lesson Preview","tutor"),!Z&&(0,a.tZ)(m.Z,{size:"small",content:(0,u.__)("Pro","tutor")})),helpText:(0,u.__)("If checked, any user/guest can view this lesson without enrolling in the course.","tutor")}))}}),(0,a.tZ)(w.Z,{when:K.watch("lesson_preview")},(0,a.tZ)("div",{css:Vt.previewInfo},(0,u.__)("This lesson is now available for preview. Users and guests can view it without enrolling in the course.","tutor")))))))))};const Bt=Mt;var Vt={wrapper:(0,a.iv)("width:1070px;margin:0 auto;display:grid;grid-template-columns:1fr 338px;height:100%;padding-inline:",W.W0[32],";"+(true?"":0),true?"":0),lessonInfo:(0,a.iv)("padding-block:",W.W0[20],";padding-right:",W.W0[32],";display:flex;flex-direction:column;gap:",W.W0[24],";position:sticky;top:0;z-index:",W.W5.positive,";"+(true?"":0),true?"":0),description:true?{name:"bjn8wh",styles:"position:relative"}:0,descriptionLabel:true?{name:"188e2n4",styles:"display:flex;align-items:center;justify-content:space-between;height:32px"}:0,addH5PContentButton:function t(e){var r=e.isPro,n=r===void 0?true:r;return(0,a.iv)("text-decoration:none;font-size:13px;line-height:2.15384615;min-height:30px;margin:0;padding:",!n?"0px":"0 10px",";cursor:pointer;border:1px solid #3e64de;border-radius:3px;white-space:nowrap;box-sizing:border-box;color:#3e64de;border-color:#3e64de;background:transparent;[data-button-text]{",dt.i.flexCenter(),";padding:0 10px;}:hover:not(:disabled){background:",W.Jv.background.white,";}:disabled{cursor:not-allowed;position:relative;top:auto;left:auto;opacity:0.5;}"+(true?"":0),true?"":0)},rightPanel:(0,a.iv)("border-left:1px solid ",W.Jv.stroke.divider,";display:flex;flex-direction:column;gap:",W.W0[16],";padding-block:",W.W0[20],";padding-left:",W.W0[32],";"+(true?"":0),true?"":0),durationWrapper:(0,a.iv)("display:flex;flex-direction:column;gap:",W.W0[8],";"+(true?"":0),true?"":0),duration:(0,a.iv)("display:flex;align-items:flex-end;gap:",W.W0[8],";"+(true?"":0),true?"":0),durationContent:(0,a.iv)(N.c.small(),";color:",W.Jv.text.hints,";"+(true?"":0),true?"":0),additionLabel:(0,a.iv)(N.c.body()," color:",W.Jv.text.title,";"+(true?"":0),true?"":0),lessonPreview:(0,a.iv)("background-color:",W.Jv.background.white,";padding:",W.W0[12],";border:1px solid ",W.Jv.stroke["default"],";border-radius:",W.E0[8],";"+(true?"":0),true?"":0),previewLabel:(0,a.iv)("display:flex;align-items:center;gap:",W.W0[4],";"+(true?"":0),true?"":0),contentDripLabel:(0,a.iv)("display:flex;align-items:center;svg{margin-right:",W.W0[4],";color:",W.Jv.icon.success,";}"+(true?"":0),true?"":0),previewInfo:(0,a.iv)(N.c.small(),";text-align:center;color:",W.Jv.text.title,";padding:",W.W0[8]," ",W.W0[24],";background:",W.Jv.background.status.success,";border-radius:",W.E0[4],";margin-top:",W.W0[12],";"+(true?"":0),true?"":0),wpEditorButton:(0,a.iv)("margin-left:",W.W0[4],";color:",W.Jv.text.brand,";svg{color:",W.Jv.icon.brand,";}&:hover:not(:disabled){text-decoration:underline;}"+(true?"":0),true?"":0)};var Ht=r(8898);var Yt=r(1933);var $t=r(6895);var Kt=r(7301);function Xt(t){"@babel/helpers - typeof";return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function te(){te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return te.apply(this,arguments)}function ee(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(r),!0).forEach((function(e){ne(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ne(t,e,r){e=oe(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function oe(t){var e=ie(t,"string");return Xt(e)==="symbol"?e:String(e)}function ie(t,e){if(Xt(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Xt(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ae(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ue={true_false:{label:(0,u.__)("True/False","tutor"),icon:"quizTrueFalse"},multiple_choice:{label:(0,u.__)("Multiple Choice","tutor"),icon:"quizMultiChoice"},open_ended:{label:(0,u.__)("Open Ended/ Essay","tutor"),icon:"quizEssay"},fill_in_the_blank:{label:(0,u.__)("Fill in the Blanks","tutor"),icon:"quizFillInTheBlanks"},short_answer:{label:(0,u.__)("Short Answer","tutor"),icon:"quizShortAnswer"},matching:{label:(0,u.__)("Matching","tutor"),icon:"quizImageMatching"},image_answering:{label:(0,u.__)("Image Answering","tutor"),icon:"quizImageAnswer"},ordering:{label:(0,u.__)("Ordering","tutor"),icon:"quizOrdering"},h5p:{label:(0,u.__)("H5P","tutor"),icon:"quizTrueFalse"}};var se=true?{name:"z33n32",styles:"max-width:80px"}:0;var ce=function t(){var e=(0,Kt.S)(),r=e.activeQuestionIndex,n=e.activeQuestionId,o=e.validationError,i=e.setValidationError;var s=(0,_.Gc)();var c=s.watch("questions.".concat(r,".question_type"));var l=s.watch("questions.".concat(r,"._data_status"));if(!n){return(0,a.tZ)("p",{css:de.emptyQuestions},(0,u.__)("Create/Select a question to view details","tutor"))}return(0,a.tZ)("div",{key:"".concat(n,"-").concat(r)},(0,a.tZ)("div",{css:de.questionTypeWrapper},(0,a.tZ)("div",{css:N.c.caption("medium")},(0,u.__)("Question Type","tutor")),(0,a.tZ)("div",{css:de.questionType},(0,a.tZ)(p.Z,{name:c?ue[c].icon:"quizTrueFalse",width:32,height:32}),(0,a.tZ)("span",null,c?ue[c].label:""))),(0,a.tZ)("div",{css:de.conditions},(0,a.tZ)("p",null,(0,u.__)("Conditions:","tutor")),(0,a.tZ)("div",{css:de.conditionControls},(0,a.tZ)(w.Z,{when:c==="multiple_choice"},(0,a.tZ)(_.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.has_multiple_correct_answer"),render:function t(e){return(0,a.tZ)(ct.Z,te({},e,{label:(0,u.__)("Multiple Correct Answer","tutor"),onChange:function t(e){if((0,yt.JS)(l,yt.dP.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(l,yt.dP.UPDATE))}if(!e){s.setValue("questions.".concat(r,".question_answers"),s.getValues("questions.".concat(r,".question_answers")).map((function(t){return re(re({},t),{},{is_correct:"0"})})))}}}))}})),(0,a.tZ)(w.Z,{when:c==="matching"},(0,a.tZ)(_.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.is_image_matching"),render:function t(e){return(0,a.tZ)(ct.Z,te({},e,{label:(0,u.__)("Image Matching","tutor"),onChange:function t(e){if((0,yt.JS)(l,yt.dP.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(l,yt.dP.UPDATE))}if((o===null||o===void 0?void 0:o.type)==="question"&&!e){i(null)}}}))}})),(0,a.tZ)(_.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.answer_required"),render:function t(e){return(0,a.tZ)(ct.Z,te({},e,{label:(0,u.__)("Answer Required","tutor"),onChange:function t(){if((0,yt.JS)(l,yt.dP.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(l,yt.dP.UPDATE))}}}))}}),(0,a.tZ)(_.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.randomize_options"),render:function t(e){return(0,a.tZ)(ct.Z,te({},e,{label:(0,u.__)("Randomize Choice","tutor"),onChange:function t(){if((0,yt.JS)(l,yt.dP.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(l,yt.dP.UPDATE))}}}))}}),(0,a.tZ)(_.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.question_mark"),rules:{min:0},render:function t(e){return(0,a.tZ)(k.Z,te({},e,{label:(0,u.__)("Point For This Question","tutor"),type:"number",isInlineLabel:true,placeholder:"0",selectOnFocus:true,style:se,onChange:function t(){if((0,yt.JS)(l,yt.dP.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(l,yt.dP.UPDATE))}}}))}}),(0,a.tZ)(_.Qr,{control:s.control,name:"questions.".concat(r,".question_settings.show_question_mark"),render:function t(e){return(0,a.tZ)(ct.Z,te({},e,{label:(0,u.__)("Display Points","tutor"),onChange:function t(){if((0,yt.JS)(l,yt.dP.UPDATE)){s.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(l,yt.dP.UPDATE))}}}))}}))))};const le=ce;var de={emptyQuestions:(0,a.iv)("padding:",W.W0[12]," ",W.W0[32]," ",W.W0[24]," ",W.W0[24],";",N.c.caption("medium"),";"+(true?"":0),true?"":0),questionTypeWrapper:(0,a.iv)(dt.i.display.flex("column"),";padding:",W.W0[8]," ",W.W0[32]," ",W.W0[24]," ",W.W0[24],";gap:",W.W0[10],";border-bottom:1px solid ",W.Jv.stroke.divider,";"+(true?"":0),true?"":0),questionType:(0,a.iv)("display:flex;align-items:center;gap:",W.W0[10],";"+(true?"":0),true?"":0),conditions:(0,a.iv)("padding:",W.W0[8]," ",W.W0[32]," ",W.W0[24]," ",W.W0[24],";p{",N.c.body("medium"),";color:",W.Jv.text.primary,";}"+(true?"":0),true?"":0),conditionControls:(0,a.iv)(dt.i.display.flex("column"),";gap:",W.W0[16],";margin-top:",W.W0[16],";"+(true?"":0),true?"":0)};var fe=r(4063);var pe=r(7687);var ve=r(8304);var he=r(4565);var ye=r(8945);var _e=function t(){var e=(0,_.Gc)();var r=(0,Kt.S)(),n=r.activeQuestionIndex;var o=(0,_.Dq)({control:e.control,name:"questions.".concat(n,".question_answers")}),i=o.fields;return(0,a.tZ)("div",{css:ge.optionWrapper},(0,a.tZ)(_.Qr,{key:i.length?JSON.stringify(i[0]):"",control:e.control,name:"questions.".concat(n,".question_answers.0"),render:function t(e){return(0,a.tZ)(ye.Z,e)}}))};const me=_e;var ge={optionWrapper:(0,a.iv)(dt.i.display.flex("column"),";padding-left:",W.W0[40],";"+(true?"":0),true?"":0)};var be=r(4830);var we=r(7583);function Ze(t){"@babel/helpers - typeof";return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function Oe(){Oe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Oe.apply(this,arguments)}function xe(t){return Ee(t)||Se(t)||De(t)||qe()}function qe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Se(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ee(t){if(Array.isArray(t))return Ce(t)}function je(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?je(Object(r),!0).forEach((function(e){ke(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ke(t,e,r){e=Te(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Te(t){var e=Ae(t,"string");return Ze(e)==="symbol"?e:String(e)}function Ae(t,e){if(Ze(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Ze(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ze(t,e){return We(t)||Le(t,e)||De(t,e)||Ie()}function Ie(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function De(t,e){if(!t)return;if(typeof t==="string")return Ce(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(t,e)}function Ce(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Le(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function We(t){if(Array.isArray(t))return t}var Ne=function t(){var e=(0,s.useState)(null),r=ze(e,2),l=r[0],f=r[1];var v=(0,_.Gc)();var h=(0,Kt.S)(),y=h.activeQuestionIndex,m=h.activeQuestionId,g=h.validationError,b=h.setValidationError;var Z=(0,_.Dq)({control:v.control,name:"questions.".concat(y,".question_answers")}),O=Z.fields,x=Z.append,q=Z.insert,S=Z.remove,E=Z.move;var j=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:i.is}));var P=(0,s.useMemo)((function(){if(!l){return null}return O.find((function(t){return t.answer_id===l}))}),[l,O]);var k=function t(){x({_data_status:yt.dP.NEW,is_saved:false,answer_id:(0,U.x0)(),answer_title:"",is_correct:"0",belongs_question_id:m,belongs_question_type:"image_answering",answer_order:O.length,answer_two_gap_match:"",answer_view_format:""},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(O.length,".answer_title")});if((g===null||g===void 0?void 0:g.type)==="add_option"){b(null)}};var T=function t(e,r){var n=Pe(Pe({},r),{},{_data_status:yt.dP.NEW,is_saved:true,answer_id:(0,U.x0)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;q(o,n)};var A=function t(e,r){S(e);if(r._data_status!==yt.dP.NEW){v.setValue("deleted_answer_ids",[].concat(xe(v.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.tZ)("div",{css:Je.optionWrapper},(0,a.tZ)(n.LB,{sensors:j,collisionDetection:n.pE,modifiers:[o.hg],onDragStart:function t(e){f(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=O.findIndex((function(t){return t.answer_id===r.id}));var i=O.findIndex((function(t){return t.answer_id===n.id}));E(o,i)}f(null)}},(0,a.tZ)(i.Fo,{items:O.map((function(t){return Pe(Pe({},t),{},{id:t.answer_id})})),strategy:i.qw},(0,a.tZ)(we.Z,{each:O},(function(t,e){return(0,a.tZ)(_.Qr,{key:"".concat(t.answer_id,"-").concat(e),control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.tZ)(be.Z,Oe({},n,{onDuplicateOption:function t(r){return T(e,r)},onRemoveOption:function r(){return A(e,t)},index:e}))}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(w.Z,{when:P},(function(t){var e=O.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.tZ)(_.Qr,{key:l,control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.tZ)(be.Z,Oe({},r,{onDuplicateOption:U.ZT,onRemoveOption:U.ZT,index:e,isOverlay:true}))}})}))),document.body)),(0,a.tZ)("div",null,(0,a.tZ)(d.Z,{variant:"text",onClick:k,buttonContentCss:Je.addOptionButton,icon:(0,a.tZ)(p.Z,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const Qe=Ne;var Je={optionWrapper:(0,a.iv)(dt.i.display.flex("column"),";gap:",W.W0[12],";padding-left:",W.W0[40],";"+(true?"":0),true?"":0),addOptionButton:(0,a.iv)("color:",W.Jv.text.brand,";svg{color:",W.Jv.icon.brand,";}"+(true?"":0),true?"":0)};var Fe=r(8931);function Ue(t){"@babel/helpers - typeof";return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function Ge(){Ge=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Ge.apply(this,arguments)}function Re(t){return Ve(t)||Be(t)||rr(t)||Me()}function Me(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Be(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ve(t){if(Array.isArray(t))return nr(t)}function He(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ye(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?He(Object(r),!0).forEach((function(e){$e(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $e(t,e,r){e=Ke(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Ke(t){var e=Xe(t,"string");return Ue(e)==="symbol"?e:String(e)}function Xe(t,e){if(Ue(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Ue(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tr(t,e){return ir(t)||or(t,e)||rr(t,e)||er()}function er(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rr(t,e){if(!t)return;if(typeof t==="string")return nr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nr(t,e)}function nr(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function or(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function ir(t){if(Array.isArray(t))return t}var ar=function t(){var e=(0,s.useState)(null),r=tr(e,2),l=r[0],f=r[1];var v=(0,_.Gc)();var h=(0,Kt.S)(),y=h.activeQuestionIndex,m=h.activeQuestionId,g=h.validationError,b=h.setValidationError;var Z=(0,_.Dq)({control:v.control,name:"questions.".concat(y,".question_answers")}),O=Z.fields,x=Z.append,q=Z.insert,S=Z.remove,E=Z.move;var j=(0,_.qo)({control:v.control,name:"questions.".concat(y,".question_settings.is_image_matching"),defaultValue:false});var P=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:i.is}));var k=(0,s.useMemo)((function(){if(!l){return null}return O.find((function(t){return t.answer_id===l}))}),[l,O]);var T=function t(){x({_data_status:yt.dP.NEW,is_saved:false,answer_id:(0,U.x0)(),answer_title:"",is_correct:"0",belongs_question_id:m,belongs_question_type:j?"image_matching":"matching",answer_order:O.length,answer_two_gap_match:"",answer_view_format:""},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(O.length,".answer_title")});if((g===null||g===void 0?void 0:g.type)==="add_option"){b(null)}};var A=function t(e,r){var n=Ye(Ye({},r),{},{_data_status:yt.dP.NEW,is_saved:true,answer_id:(0,U.x0)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;q(o,n)};var z=function t(e,r){S(e);if(r._data_status!==yt.dP.NEW){v.setValue("deleted_answer_ids",[].concat(Re(v.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.tZ)("div",{css:sr.optionWrapper},(0,a.tZ)(n.LB,{sensors:P,collisionDetection:n.pE,modifiers:[o.hg],onDragStart:function t(e){f(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=O.findIndex((function(t){return t.answer_id===r.id}));var i=O.findIndex((function(t){return t.answer_id===n.id}));E(o,i)}f(null)}},(0,a.tZ)(i.Fo,{items:O.map((function(t){return Ye(Ye({},t),{},{id:t.answer_id})})),strategy:i.qw},(0,a.tZ)(we.Z,{each:O},(function(t,e){return(0,a.tZ)(_.Qr,{key:"".concat(t.answer_id,"-").concat(e),control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.tZ)(Fe.Z,Ge({},n,{index:e,onDuplicateOption:function t(r){return A(e,r)},onRemoveOption:function r(){return z(e,t)}}))}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(w.Z,{when:k},(function(t){var e=O.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.tZ)(_.Qr,{key:l,control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.tZ)(Fe.Z,Ge({},r,{index:e,onDuplicateOption:U.ZT,onRemoveOption:U.ZT,isOverlay:true}))}})}))),document.body)),(0,a.tZ)("div",null,(0,a.tZ)(d.Z,{variant:"text",onClick:T,buttonContentCss:sr.addOptionButton,icon:(0,a.tZ)(p.Z,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const ur=ar;var sr={optionWrapper:(0,a.iv)(dt.i.display.flex("column"),";gap:",W.W0[12],";padding-left:",W.W0[40],";"+(true?"":0),true?"":0),addOptionButton:(0,a.iv)("color:",W.Jv.text.brand,";svg{color:",W.Jv.icon.brand,";}"+(true?"":0),true?"":0)};var cr=r(9642);function lr(t){"@babel/helpers - typeof";return lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}function dr(){dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return dr.apply(this,arguments)}function fr(t){return hr(t)||vr(t)||Or(t)||pr()}function pr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function vr(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hr(t){if(Array.isArray(t))return xr(t)}function yr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yr(Object(r),!0).forEach((function(e){mr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mr(t,e,r){e=gr(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function gr(t){var e=br(t,"string");return lr(e)==="symbol"?e:String(e)}function br(t,e){if(lr(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(lr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wr(t,e){return Sr(t)||qr(t,e)||Or(t,e)||Zr()}function Zr(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Or(t,e){if(!t)return;if(typeof t==="string")return xr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xr(t,e)}function xr(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qr(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function Sr(t){if(Array.isArray(t))return t}var Er=function t(){var e=(0,s.useState)(null),r=wr(e,2),l=r[0],f=r[1];var v=(0,_.Gc)();var h=(0,Kt.S)(),y=h.activeQuestionIndex,m=h.activeQuestionId,g=h.validationError,b=h.setValidationError;var Z=(0,_.qo)({control:v.control,name:"questions.".concat(y,".question_settings.has_multiple_correct_answer"),defaultValue:false});var O=v.watch("questions.".concat(y,".question_type"));var x=(0,_.Dq)({control:v.control,name:"questions.".concat(y,".question_answers")}),q=x.fields,S=x.append,E=x.insert,j=x.remove,P=x.update,k=x.replace,T=x.move;var A=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:i.is}));var z=(0,_.qo)({control:v.control,name:"questions.".concat(y,".question_answers"),defaultValue:[]});var I=(0,s.useMemo)((function(){if(!l){return null}return q.find((function(t){return t.answer_id===l}))}),[l,q]);var D=function t(e,r){if(Z){P(e,_r(_r(_r({},r),(0,yt.JS)(r._data_status,yt.dP.UPDATE)&&{_data_status:(0,yt.JS)(r._data_status,yt.dP.UPDATE)}),{},{is_correct:r.is_correct==="1"?"0":"1"}))}else{var n=z.map((function(t){return _r(_r(_r({},t),(0,yt.JS)(t._data_status,yt.dP.UPDATE)&&{_data_status:(0,yt.JS)(t._data_status,yt.dP.UPDATE)}),{},{is_correct:t.answer_id===r.answer_id?"1":"0"})}));k(n)}if((g===null||g===void 0?void 0:g.type)==="correct_option"){b(null)}};var C=function t(){S({_data_status:yt.dP.NEW,is_saved:false,answer_id:(0,U.x0)(),answer_title:"",is_correct:"0",belongs_question_id:m,belongs_question_type:O,answer_order:q.length,answer_two_gap_match:"",answer_view_format:"text"},{shouldFocus:true,focusName:"questions.".concat(y,".question_answers.").concat(q.length,".answer_title")});if((g===null||g===void 0?void 0:g.type)==="add_option"){b(null)}};var L=function t(e,r){var n=_r(_r({},r),{},{_data_status:yt.dP.NEW,is_saved:true,answer_id:(0,U.x0)(),answer_title:"".concat(r.answer_title," (copy)"),is_correct:"0"});var o=e+1;E(o,n)};var W=function t(e,r){j(e);if(r._data_status!==yt.dP.NEW){v.setValue("deleted_answer_ids",[].concat(fr(v.getValues("deleted_answer_ids")),[r.answer_id]))}};return(0,a.tZ)("div",{css:Pr.optionWrapper({isOrdering:O==="ordering"})},(0,a.tZ)(n.LB,{sensors:A,collisionDetection:n.pE,modifiers:[o.hg],onDragStart:function t(e){f(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=q.findIndex((function(t){return t.answer_id===r.id}));var i=q.findIndex((function(t){return t.answer_id===n.id}));T(o,i)}f(null)}},(0,a.tZ)(i.Fo,{items:q.map((function(t){return _r(_r({},t),{},{id:t.answer_id})})),strategy:i.qw},(0,a.tZ)(we.Z,{each:q},(function(t,e){return(0,a.tZ)(_.Qr,{key:"".concat(t.answer_id,"-").concat(t.is_correct),control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function r(n){return(0,a.tZ)(cr.Z,dr({},n,{onDuplicateOption:function t(r){return L(e,r)},onRemoveOption:function r(){return W(e,t)},onCheckCorrectAnswer:function r(){return D(e,t)},index:e}))}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(w.Z,{when:I},(function(t){var e=z.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.tZ)(_.Qr,{key:l,control:v.control,name:"questions.".concat(y,".question_answers.").concat(e),render:function t(r){return(0,a.tZ)(cr.Z,dr({},r,{onDuplicateOption:U.ZT,onRemoveOption:U.ZT,onCheckCorrectAnswer:U.ZT,index:e,isOverlay:true}))}})}))),document.body)),(0,a.tZ)("div",{css:Pr.addOptionButtonWrapper({isOrdering:O==="ordering"})},(0,a.tZ)(d.Z,{variant:"text",onClick:C,buttonContentCss:Pr.addOptionButton,icon:(0,a.tZ)(p.Z,{name:"plus",height:24,width:24})},(0,u.__)("Add Option","tutor"))))};const jr=Er;var Pr={optionWrapper:function t(e){var r=e.isOrdering;return(0,a.iv)(dt.i.display.flex("column"),";gap:",W.W0[12],";",r&&(0,a.iv)("padding-left:",W.W0[40],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},addOptionButtonWrapper:function t(e){var r=e.isOrdering;return(0,a.iv)("margin-left:",W.W0[48],";",r&&(0,a.iv)("margin-left:",W.W0[8],";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},addOptionButton:(0,a.iv)("color:",W.Jv.text.brand,";svg{color:",W.Jv.icon.brand,";}"+(true?"":0),true?"":0)};var kr=function t(){return(0,a.tZ)("div",{css:Ar.optionWrapper},(0,a.tZ)(fe.Z,{icon:"bulb"},(0,u.__)("No options are necessary for this question type","tutor")))};const Tr=kr;var Ar={optionWrapper:(0,a.iv)("padding-left:",W.W0[40],";"+(true?"":0),true?"":0)};var zr=r(6446);function Ir(t){"@babel/helpers - typeof";return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ir(t)}function Dr(){Dr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Dr.apply(this,arguments)}function Cr(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Vr(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var o=function t(){};return{s:o,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function Lr(t){return Qr(t)||Nr(t)||Vr(t)||Wr()}function Wr(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nr(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qr(t){if(Array.isArray(t))return Hr(t)}function Jr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jr(Object(r),!0).forEach((function(e){Ur(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ur(t,e,r){e=Gr(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Gr(t){var e=Rr(t,"string");return Ir(e)==="symbol"?e:String(e)}function Rr(t,e){if(Ir(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Ir(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mr(t,e){return $r(t)||Yr(t,e)||Vr(t,e)||Br()}function Br(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vr(t,e){if(!t)return;if(typeof t==="string")return Hr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hr(t,e)}function Hr(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yr(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function $r(t){if(Array.isArray(t))return t}var Kr=function t(){var e=(0,s.useState)(null),r=Mr(e,2),u=r[0],l=r[1];var d=(0,_.Gc)();var f=(0,Kt.S)(),p=f.activeQuestionIndex;var v=(0,_.Dq)({control:d.control,name:"questions.".concat(p,".question_answers")}),h=v.fields,y=v.move,m=v.replace;var g=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:i.is}));var b=(0,_.qo)({control:d.control,name:"questions.".concat(p,".question_answers"),defaultValue:[]});var Z=(0,s.useMemo)((function(){if(!u){return null}return h.find((function(t){return t.answer_id===u}))}),[u,h]);var O=function t(e,r){var n=b.map((function(t){return Fr(Fr(Fr({},t),(0,yt.JS)(t._data_status,yt.dP.UPDATE)&&{_data_status:(0,yt.JS)(t._data_status,yt.dP.UPDATE)}),{},{is_correct:t.answer_id===r.answer_id?"1":"0"})}));m(n)};(0,s.useEffect)((function(){var t=b.filter((function(t){var e=h.findIndex((function(e){return e.answer_id===t.answer_id}));var r=h[e]||{};return t.is_correct!==r.is_correct}));if(t.length===0){return}var e=h.findIndex((function(e){return e.answer_id===t[0].answer_id}));var r=Lr(b);r[e]=Object.assign({},r[e],{is_correct:"1"});var n=Cr(r.entries()),o;try{for(n.s();!(o=n.n()).done;){var i=Mr(o.value,2),a=i[0],u=i[1];if(a!==e){r[a]=Fr(Fr(Fr({},u),(0,yt.JS)(u._data_status,yt.dP.UPDATE)&&{_data_status:(0,yt.JS)(u._data_status,yt.dP.UPDATE)}),{},{is_correct:"0"})}}}catch(t){n.e(t)}finally{n.f()}d.setValue("questions.".concat(p,".question_answers"),r)}),[b]);return(0,a.tZ)("div",{css:tn.optionWrapper},(0,a.tZ)(n.LB,{sensors:g,collisionDetection:n.pE,modifiers:[o.hg],onDragStart:function t(e){l(e.active.id)},onDragEnd:function t(e){var r=e.active,n=e.over;if(!n){return}if(r.id!==n.id){var o=h.findIndex((function(t){return t.answer_id===r.id}));var i=h.findIndex((function(t){return t.answer_id===n.id}));y(o,i)}l(null)}},(0,a.tZ)(i.Fo,{items:h.map((function(t){return Fr(Fr({},t),{},{id:t.answer_id})})),strategy:i.qw},(0,a.tZ)(we.Z,{each:h},(function(t,e){return(0,a.tZ)(_.Qr,{key:"".concat(t.answer_id,"-").concat(t.is_correct),control:d.control,name:"questions.".concat(p,".question_answers.").concat(e),render:function r(n){return(0,a.tZ)(zr.Z,Dr({},n,{index:e,onCheckCorrectAnswer:function r(){return O(e,t)}}))}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(w.Z,{when:Z},(function(t){var e=h.findIndex((function(e){return e.answer_id===t.answer_id}));return(0,a.tZ)(_.Qr,{key:u,control:d.control,name:"questions.".concat(p,".question_answers.").concat(e),render:function t(r){return(0,a.tZ)(zr.Z,Dr({},r,{index:e,onCheckCorrectAnswer:U.ZT,isOverlay:true}))}})}))),document.body)))};const Xr=Kr;var tn={optionWrapper:(0,a.iv)(dt.i.display.flex("column"),";gap:",W.W0[12],";"+(true?"":0),true?"":0),option:function t(e){var r=e.isSelected;return(0,a.iv)(dt.i.display.flex(),";",N.c.caption("medium"),";align-items:center;color:",W.Jv.text.subdued,";gap:",W.W0[10],";height:48px;align-items:center;[data-check-icon]{opacity:0;transition:opacity 0.15s ease-in-out;fill:none;flex-shrink:0;}&:hover{[data-check-icon]{opacity:1;}}",r&&(0,a.iv)("[data-check-icon]{opacity:1;color:",W.Jv.bg.success,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionLabel:function t(e){var r=e.isSelected;return(0,a.iv)("display:grid;grid-template-columns:1fr auto 1fr;align-items:center;width:100%;border-radius:",W.E0.card,";padding:",W.W0[12]," ",W.W0[16],";background-color:",W.Jv.background.white,";cursor:pointer;[data-visually-hidden]{opacity:0;}&:hover{box-shadow:0 0 0 1px ",W.Jv.stroke.hover,";[data-visually-hidden]{opacity:1;}}",r&&(0,a.iv)("background-color:",W.Jv.background.success.fill40,";color:",W.Jv.text.primary,";&:hover{box-shadow:0 0 0 1px ",W.Jv.stroke.success.fill70,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},optionDragButton:(0,a.iv)(dt.i.resetButton," ",dt.i.flexCenter()," transform:rotate(90deg);color:",W.Jv.icon["default"],";cursor:grab;place-self:center center;"+(true?"":0),true?"":0)};var en=r(2460);const rn=r.p+"images/9e5f8c5e5307063e90cc7f2a55e50d8c-quiz-empty-state-2x.webp";const nn=r.p+"images/bdb31b4692f8bb5ee2633ce7abb0356d-quiz-empty-state.webp";function on(){on=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return on.apply(this,arguments)}function an(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var un=!!C.y.tutor_pro_url;var sn=function t(){var e=(0,Kt.S)(),r=e.activeQuestionIndex,n=e.activeQuestionId,o=e.validationError,i=e.contentType;var c=(0,en.D)(n);var l=(0,_.Gc)();var d=(0,s.useRef)(null);var f=l.watch("questions.".concat(r,".question_type"));var p=l.watch("questions")||[];var v=l.watch("questions.".concat(r,"._data_status"));var h={true_false:(0,a.tZ)(Xr,{key:n}),multiple_choice:(0,a.tZ)(jr,{key:n}),open_ended:(0,a.tZ)(Tr,{key:n}),fill_in_the_blank:(0,a.tZ)(me,{key:n}),short_answer:(0,a.tZ)(Tr,{key:n}),matching:(0,a.tZ)(ur,{key:n}),image_answering:(0,a.tZ)(Qe,{key:n}),ordering:(0,a.tZ)(jr,{key:n})};(0,s.useEffect)((function(){if(o&&d.current){d.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[o]);if(!n&&!l.formState.isLoading&&p.length===0){return(0,a.tZ)("div",{css:ln.emptyState},(0,a.tZ)("img",{css:ln.emptyStateImage,src:nn,srcSet:"".concat(nn," 1x, ").concat(rn," 2x"),alt:""}),(0,a.tZ)("p",{css:ln.emptyStateText},(0,u.__)("Enter a quiz title to begin. Choose from a variety of question types to keep things interesting!","tutor")))}return(0,a.tZ)("div",{key:r,css:ln.questionForm(n===c)},(0,a.tZ)("div",{css:ln.questionWithIndex},(0,a.tZ)("div",{css:ln.questionIndex},r+1,"."),(0,a.tZ)("div",{css:ln.questionTitleAndDesc},(0,a.tZ)(_.Qr,{control:l.control,rules:{required:(0,u.__)("Question title is required","tutor")},name:"questions.".concat(r,".question_title"),render:function t(e){var n;return(0,a.tZ)(he.Z,on({},e,{placeholder:(0,u.__)("Write your question here..","tutor"),disabled:i==="tutor_h5p_quiz",onChange:function t(){if((0,yt.JS)(v,yt.dP.UPDATE)){l.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(v,yt.dP.UPDATE))}},selectOnFocus:((n=p[r])===null||n===void 0?void 0:n._data_status)===yt.dP.NEW}))}}),(0,a.tZ)(w.Z,{when:i!=="tutor_h5p_quiz",fallback:(0,a.tZ)("div",null,(0,a.tZ)("div",{css:ln.h5pShortCode},'[h5p id: "'.concat(l.watch("questions.".concat(r,".question_description")),'"]')))},(0,a.tZ)(_.Qr,{control:l.control,name:"questions.".concat(r,".question_description"),render:function t(e){return(0,a.tZ)(ve.Z,on({},e,{placeholder:(0,u.__)("Description (optional)","tutor"),disabled:i==="tutor_h5p_quiz",onChange:function t(){if((0,yt.JS)(v,yt.dP.UPDATE)){l.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(v,yt.dP.UPDATE))}}}))}})))),(0,a.tZ)(w.Z,{when:o},(0,a.tZ)("div",{key:Math.random(),ref:d,css:ln.alertWrapper},(0,a.tZ)(fe.Z,{type:"danger",icon:"warning"},o===null||o===void 0?void 0:o.message))),h[f],(0,a.tZ)(w.Z,{when:un&&f!=="h5p"},(0,a.tZ)("div",{css:ln.questionAnswer},(0,a.tZ)(_.Qr,{control:l.control,name:"questions.".concat(r,".answer_explanation"),render:function t(e){return(0,a.tZ)(pe.Z,on({},e,{label:(0,u.__)("Answer Explanation","tutor"),placeholder:(0,u.__)("Write answer explanation...","tutor"),onChange:function t(){if((0,yt.JS)(v,yt.dP.UPDATE)){l.setValue("questions.".concat(r,"._data_status"),(0,yt.JS)(v,yt.dP.UPDATE))}}}))}}))))};const cn=sn;var ln={questionForm:function t(e){return(0,a.iv)(dt.i.display.flex("column"),";padding-right:",W.W0[48],";gap:",W.W0[16],";animation:",e?undefined:"fadeIn 0.25s ease-in-out",";@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}"+(true?"":0),true?"":0)},questionWithIndex:(0,a.iv)(dt.i.display.flex("row"),";align-items:flex-start;padding-left:",W.W0[40],";gap:",W.W0[4],";"+(true?"":0),true?"":0),questionIndex:(0,a.iv)("margin-top:",W.W0[10],";",N.c.heading6(),";color:",W.Jv.text.hints,";"+(true?"":0),true?"":0),questionTitleAndDesc:(0,a.iv)(dt.i.display.flex("column"),";gap:",W.W0[8],";width:100%;"+(true?"":0),true?"":0),h5pShortCode:(0,a.iv)("margin-left:",W.W0[8],";padding:",W.W0[4]," ",W.W0[8],";",N.c.caption(),";color:",W.Jv.text.white,";background-color:#2575be;border-radius:",W.E0.card,";width:fit-content;font-family:'Fire Code',monospace;"+(true?"":0),true?"":0),questionAnswer:(0,a.iv)("padding-left:",W.W0[40],";"+(true?"":0),true?"":0),emptyState:(0,a.iv)(dt.i.flexCenter("column"),";padding-left:",W.W0[40],";padding-right:",W.W0[48],";gap:",W.W0[16],";"+(true?"":0),true?"":0),emptyStateImage:true?{name:"vdj5lp",styles:"width:220px;height:auto"}:0,emptyStateText:(0,a.iv)(N.c.small(),";color:",W.Jv.text.subdued,";text-align:center;max-width:330px;"+(true?"":0),true?"":0),alertWrapper:(0,a.iv)("padding-left:",W.W0[40],";animation:shake 0.3s linear;@keyframes shake{0%{transform:translateX(0);}25%{transform:translateX(-5px);}50%{transform:translateX(5px);}75%{transform:translateX(-5px);}100%{transform:translateX(0);}}"+(true?"":0),true?"":0)};var dn=r(3366);var fn=r(4215);function pn(){pn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return pn.apply(this,arguments)}function vn(t,e){return gn(t)||mn(t,e)||yn(t,e)||hn()}function hn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yn(t,e){if(!t)return;if(typeof t==="string")return _n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _n(t,e)}function _n(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mn(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function gn(t){if(Array.isArray(t))return t}function bn(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var wn={true_false:"quizTrueFalse",multiple_choice:"quizMultiChoice",open_ended:"quizEssay",fill_in_the_blank:"quizFillInTheBlanks",short_answer:"quizShortAnswer",matching:"quizImageMatching",image_answering:"quizImageAnswer",ordering:"quizOrdering",h5p:"quizH5p"};var Zn=!!C.y.tutor_pro_url;var On=function t(e){var r=e.question,n=e.index,o=e.onDuplicateQuestion,c=e.onRemoveQuestion,l=e.isOverlay,d=l===void 0?false:l;var f=(0,Kt.S)(),v=f.activeQuestionIndex,y=f.activeQuestionId,g=f.validationError,b=f.setActiveQuestionId,w=f.setValidationError,Z=f.contentType;var O=(0,_.Gc)();var q=(0,s.useState)(false),S=vn(q,2),E=S[0],j=S[1];var P=(0,s.useRef)(null);var k=(0,i.nB)({id:r.question_id,animateLayoutChanges:fn.h}),T=k.attributes,A=k.listeners,z=k.setNodeRef,I=k.transform,D=k.transition,C=k.isDragging;var L={transform:h.ux.Transform.toString(I),transition:D,opacity:C?.3:undefined,background:C?W.Jv.stroke.hover:undefined};(0,s.useEffect)((function(){if(y===r.question_id){var t;(t=P.current)===null||t===void 0?void 0:t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}),[y,r.question_id]);return(0,a.tZ)("div",pn({},T,{key:r.question_id,css:Sn.questionItem({isActive:String(y)===String(r.question_id),isDragging:d,isThreeDotsOpen:E}),ref:function t(e){z(e);P.current=e},style:L,onClick:function t(){if(y===r.question_id){return}var e=(0,J.aU)(v,O);if(e!==true){w(e);return}w(null);b(r.question_id)},onKeyDown:function t(e){if(e.key==="Enter"||e.key===" "){if(y===r.question_id){return}var n=(0,J.aU)(v,O);if(n!==true){w(n);return}w(null);b(r.question_id)}}}),(0,a.tZ)("div",{css:Sn.iconAndSerial({isDragging:d}),"data-icon-serial":true},(0,a.tZ)("span",{"data-serial":true},n+1),(0,a.tZ)("button",pn({"data-drag-icon":true},A,{type:"button",css:dt.i.resetButton}),(0,a.tZ)(p.Z,{"data-drag-icon":true,name:"dragVertical",width:24,height:24})),(0,a.tZ)(p.Z,{name:wn[r.question_type],width:24,height:24,"data-question-icon":true})),(0,a.tZ)("span",{css:Sn.questionTitle({isActive:String(y)===String(r.question_id)})},r.question_title),(0,a.tZ)(x.Z,{isOpen:E,onClick:function t(e){e.stopPropagation();var r=(0,J.aU)(v,O);j(true);if(r!==true){w(r)}},animationType:dn.ru.slideDown,closePopover:function t(){return j(false)},dotsOrientation:"vertical",maxWidth:Zn?"150px":"160px",isInverse:true,arrowPosition:"auto",size:"small",hideArrow:true,"data-three-dots":true},!g&&Z!=="tutor_h5p_quiz"&&(0,a.tZ)(x.Z.Option,{text:(0,a.tZ)("div",{css:Sn.duplicate},(0,u.__)("Duplicate","tutor"),!Zn&&(0,a.tZ)(m.Z,{size:"small",content:(0,u.__)("Pro","tutor")})),icon:(0,a.tZ)(p.Z,{name:"duplicate",width:24,height:24}),disabled:!Zn,onClick:function t(e){e.stopPropagation();o(r);j(false)}}),(0,a.tZ)(x.Z.Option,{isTrash:true,text:(0,u.__)("Delete","tutor"),icon:(0,a.tZ)(p.Z,{name:"delete",width:24,height:24}),onClick:function t(e){e.stopPropagation();c();j(false)}})))};const xn=On;var qn=true?{name:"1c7c6p3",styles:"[data-three-dots]{opacity:1;}"}:0;var Sn={questionItem:function t(e){var r=e.isActive,n=r===void 0?false:r,o=e.isDragging,i=o===void 0?false:o,u=e.isThreeDotsOpen,s=u===void 0?false:u;return(0,a.iv)("padding:",W.W0[10]," ",W.W0[8]," ",W.W0[10]," ",W.W0[28],";display:flex;align-items:center;justify-content:space-between;gap:",W.W0[12],";border-bottom:1px solid ",W.Jv.stroke.divider,";cursor:pointer;transition:border 0.3s ease-in-out,background-color 0.3s ease-in-out;[data-three-dots]{opacity:0;background:transparent;svg{color:",W.Jv.icon["default"],";}:focus-visible{opacity:1;}}",n&&(0,a.iv)("color:",W.Jv.text.brand,";background-color:",W.Jv.background.white,";[data-icon-serial]{border-top-right-radius:3px;border-bottom-right-radius:3px;border-color:transparent;}"+(true?"":0),true?"":0)," ",s&&qn," :hover{background-color:",W.Jv.background.hover,";[data-serial]{display:none;}[data-drag-icon]{display:block;}[data-icon-serial]{border-top-right-radius:3px;border-bottom-right-radius:3px;border-color:transparent;}[data-three-dots]{opacity:1;}}:focus-visible{outline:2px solid ",W.Jv.stroke.brand,";outline-offset:-2px;border-radius:",W.E0.card,";[data-three-dots]{opacity:1;}}",i&&(0,a.iv)("box-shadow:",W.AF.drag,";background-color:",W.Jv.background.white,";border-radius:",W.E0.card,";:hover{background-color:",W.Jv.background.white,";}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},iconAndSerial:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.iv)("display:grid;grid-template-columns:1fr 1fr;align-items:center;border-radius:3px 0 0 3px;width:64px;padding:",W.W0[4]," ",W.W0[8]," ",W.W0[4]," ",W.W0[4],";flex-shrink:0;column-gap:",W.W0[12],";place-items:center center;[data-drag-icon]{display:none;color:",W.Jv.icon.hints,";cursor:",n?"grabbing":"grab",";}[data-question-icon]{flex-shrink:0;}svg{flex-shrink:0;}[data-serial]{width:24px;display:block;",N.c.caption("medium")," text-align:center;flex-grow:1;}"+(true?"":0),true?"":0)},questionTitle:function t(e){var r=e.isActive,n=r===void 0?false:r;return(0,a.iv)(N.c.small(n?"medium":"regular"),";color:",n?W.Jv.text.brand:W.Jv.text.subdued,";flex-grow:1;"+(true?"":0),true?"":0)},duplicate:(0,a.iv)("display:flex;align-items:center;gap:",W.W0[4],";"+(true?"":0),true?"":0)};function En(t){"@babel/helpers - typeof";return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(t)}function jn(t){return Tn(t)||kn(t)||Qn(t)||Pn()}function Pn(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function kn(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tn(t){if(Array.isArray(t))return Jn(t)}function An(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?An(Object(r),!0).forEach((function(e){In(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function In(t,e,r){e=Dn(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Dn(t){var e=Cn(t,"string");return En(e)==="symbol"?e:String(e)}function Cn(t,e){if(En(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(En(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ln(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Qn(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var o=function t(){};return{s:o,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function Wn(t,e){return Un(t)||Fn(t,e)||Qn(t,e)||Nn()}function Nn(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Qn(t,e){if(!t)return;if(typeof t==="string")return Jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jn(t,e)}function Jn(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fn(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function Un(t){if(Array.isArray(t))return t}var Gn=[{label:(0,u.__)("True/False","tutor"),value:"true_false",icon:"quizTrueFalse",isPro:false},{label:(0,u.__)("Multiple Choice","tutor"),value:"multiple_choice",icon:"quizMultiChoice",isPro:false},{label:(0,u.__)("Open Ended/ Essay","tutor"),value:"open_ended",icon:"quizEssay",isPro:false},{label:(0,u.__)("Fill in the Blanks","tutor"),value:"fill_in_the_blank",icon:"quizFillInTheBlanks",isPro:false},{label:(0,u.__)("Short Answer","tutor"),value:"short_answer",icon:"quizShortAnswer",isPro:true},{label:(0,u.__)("Matching","tutor"),value:"matching",icon:"quizImageMatching",isPro:true},{label:(0,u.__)("Image Answering","tutor"),value:"image_answering",icon:"quizImageAnswer",isPro:true},{label:(0,u.__)("Ordering","tutor"),value:"ordering",icon:"quizOrdering",isPro:true}];var Rn=!!C.y.tutor_pro_url;var Mn=function t(e){var r=e.isEditing;var l=(0,s.useState)(null),d=Wn(l,2),f=d[0],v=d[1];var h=(0,s.useState)(false),y=Wn(h,2),Z=y[0],x=y[1];var q=(0,s.useRef)(null);var S=(0,s.useRef)(null);var E=(0,_.Gc)();var j=(0,Kt.S)(),P=j.contentType,k=j.activeQuestionIndex,T=j.validationError,A=j.setActiveQuestionId,z=j.setValidationError;var I=(0,_.Dq)({control:E.control,name:"questions"}),D=I.remove,C=I.append,L=I.insert,W=I.move,N=I.fields;var Q=(0,g.p)(),F=Q.showToast;var G=(0,b.d)(),R=G.showModal;var M=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:i.is}));var B=(0,s.useMemo)((function(){if(!f){return null}return N.find((function(t){return t.question_id===f}))}),[f,N]);var V=E.watch("questions")||[];var H=function t(e,r){var n=(0,J.aU)(k,E);if(n!==true){z(n);x(false);return}var o=(0,U.x0)();C({_data_status:yt.dP.NEW,question_id:o,question_title:e==="h5p"?r===null||r===void 0?void 0:r.title:"Question ".concat(N.length+1),question_description:e==="h5p"?r===null||r===void 0?void 0:r.id:"",question_type:e,question_answers:e==="true_false"?[{answer_id:(0,U.x0)(),_data_status:yt.dP.NEW,is_saved:true,answer_title:(0,u.__)("True","tutor"),is_correct:"1",answer_order:1,answer_two_gap_match:"",answer_view_format:"text",belongs_question_id:o,belongs_question_type:"true_false"},{answer_id:(0,U.x0)(),is_saved:true,_data_status:yt.dP.NEW,answer_title:(0,u.__)("False","tutor"),is_correct:"0",answer_order:2,answer_two_gap_match:"",answer_view_format:"text",belongs_question_id:o,belongs_question_type:"true_false"}]:e==="fill_in_the_blank"?[{_data_status:yt.dP.NEW,is_saved:false,answer_id:(0,U.x0)(),answer_title:"",belongs_question_id:o,belongs_question_type:"fill_in_the_blank",answer_two_gap_match:"",answer_view_format:"",answer_order:0,is_correct:"0"}]:[],answer_explanation:"",question_mark:1,question_order:N.length+1,question_settings:{answer_required:false,question_mark:P==="tutor_h5p_quiz"?0:1,question_type:e,randomize_options:false,show_question_mark:false}});z(null);A(o);x(false)};var Y=function t(e){var r=Ln(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;H("h5p",o)}}catch(t){r.e(t)}finally{r.f()}};var $=function t(e,r){var n=E.watch("questions.".concat(r));if(!n||T){return}var o=zn(zn({},e),{},{question_id:(0,U.x0)(),_data_status:yt.dP.NEW,question_title:"".concat(n.question_title," (copy)"),question_answers:n.question_answers.map((function(t){return zn(zn({},t),{},{answer_id:(0,U.x0)(),_data_status:yt.dP.NEW})}))});var i=r+1;L(i,o)};var K=function t(e,r){D(e);if(k===e){A("");z(null)}if(r._data_status!==yt.dP.NEW){E.setValue("deleted_question_ids",[].concat(jn(E.getValues("deleted_question_ids")),[r.question_id]))}};var X=function t(e){var r=e.active,n=e.over;if(!n||r.id===n.id){return}var o=N.findIndex((function(t){return t.question_id===r.id}));var i=N.findIndex((function(t){return t.question_id===n.id}));W(o,i)};(0,s.useEffect)((function(){if(q.current){q.current.style.maxHeight="".concat(window.innerHeight-q.current.getBoundingClientRect().top,"px")}}),[q.current,r]);if(!E.getValues("quiz_title")){return null}return(0,a.tZ)("div",null,(0,a.tZ)("div",{css:Vn.questionsLabel},(0,a.tZ)("span",null,(0,u.__)("Questions","tutor")),(0,a.tZ)("button",{ref:S,type:"button",onClick:function t(){if(P==="tutor_h5p_quiz"){R({component:Tt,props:{title:(0,u.__)("Select H5P Content","tutor"),onAddContent:function t(e){Y(e)},contentType:"tutor_h5p_quiz",addedContentIds:V.map((function(t){return t.question_description}))}})}else{x(true)}}},(0,a.tZ)(p.Z,{name:"plusSquareBrand",width:32,height:32}))),(0,a.tZ)("div",{ref:q,css:Vn.questionList},(0,a.tZ)(w.Z,{when:V.length>0,fallback:(0,a.tZ)("div",{css:Vn.emptyQuestionText},(0,u.__)("No questions added yet.","tutor"))},(0,a.tZ)(n.LB,{sensors:M,collisionDetection:n.pE,modifiers:[o.hg],onDragStart:function t(e){v(e.active.id)},onDragEnd:function t(e){return X(e)}},(0,a.tZ)(i.Fo,{items:V.map((function(t){return zn(zn({},t),{},{id:t.question_id})})),strategy:i.qw},(0,a.tZ)(we.Z,{each:V},(function(t,e){return(0,a.tZ)(xn,{key:t.question_id,question:t,index:e,onDuplicateQuestion:function t(r){$(r,e)},onRemoveQuestion:function r(){return K(e,t)}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(w.Z,{when:B},(function(t){var e=N.findIndex((function(e){return e.question_id===t.question_id}));return(0,a.tZ)(xn,{key:t.question_id,question:t,index:e,onDuplicateQuestion:U.ZT,onRemoveQuestion:U.ZT,isOverlay:true})}))),document.body))),(0,a.tZ)(O.Z,{gap:4,maxWidth:"240px",arrow:"top",triggerRef:S,isOpen:Z,closePopover:function t(){return x(false)},animationType:dn.ru.slideUp},(0,a.tZ)("div",{css:Vn.questionOptionsWrapper},(0,a.tZ)("span",{css:Vn.questionTypeOptionsTitle},(0,u.__)("Select Question Type","tutor")),Gn.map((function(t){return(0,a.tZ)(w.Z,{key:t.value,when:t.isPro&&!Rn,fallback:(0,a.tZ)("button",{key:t.value,type:"button",css:Vn.questionTypeOption,onClick:function e(){H(t.value)}},(0,a.tZ)(p.Z,{name:t.icon,width:24,height:24}),(0,a.tZ)("span",null,t.label))},(0,a.tZ)("button",{key:t.value,type:"button",css:Vn.questionTypeOption,disabled:true,onClick:U.ZT},(0,a.tZ)(p.Z,{"data-question-icon":true,name:t.icon,width:24,height:24}),(0,a.tZ)("span",null,t.label),(0,a.tZ)(m.Z,{size:"small",content:(0,u.__)("Pro","tutor")})))}))))))};const Bn=Mn;var Vn={questionsLabel:(0,a.iv)("display:flex;gap:",W.W0[4],";align-items:center;justify-content:space-between;border-bottom:1px solid ",W.Jv.stroke.divider,";padding:",W.W0[16]," ",W.W0[16]," ",W.W0[16]," ",W.W0[28],";",N.c.caption("medium"),";color:",W.Jv.text.subdued,";button{",dt.i.resetButton,";width:32px;height:32px;border-radius:",W.E0[6],";svg{color:",W.Jv.action.primary["default"],";width:100%;height:100%;}:focus-visible{outline:2px solid ",W.Jv.stroke.brand,";}}"+(true?"":0),true?"":0),questionList:(0,a.iv)(dt.i.overflowYAuto,";scrollbar-gutter:auto;padding:",W.W0[8]," 0 ",W.W0[8]," 0;"+(true?"":0),true?"":0),questionTypeOptionsTitle:(0,a.iv)(N.c.caption("medium"),";color:",W.Jv.text.subdued,";padding:",W.W0[8]," ",W.W0[16]," ",W.W0[8]," ",W.W0[20],";border-bottom:1px solid ",W.Jv.stroke.divider,";"+(true?"":0),true?"":0),questionOptionsWrapper:(0,a.iv)("display:flex;flex-direction:column;padding-block:",W.W0[6],";"+(true?"":0),true?"":0),questionTypeOption:(0,a.iv)(dt.i.resetButton,";width:100%;padding:",W.W0[8]," ",W.W0[16]," ",W.W0[8]," ",W.W0[20],";transition:background-color 0.3s ease-in-out;display:flex;align-items:center;gap:",W.W0[4],";border:2px solid transparent;:disabled{cursor:not-allowed;color:",W.Jv.text.primary,";[data-question-icon]{filter:grayscale(100%);}}:hover:enabled{background-color:",W.Jv.background.hover,";color:",W.Jv.text.title,";}:focus:enabled,:active:enabled{border-color:",W.Jv.stroke.brand,";}"+(true?"":0),true?"":0),emptyQuestionText:(0,a.iv)(N.c.small(),";color:",W.Jv.text.subdued,";padding:",W.W0[8]," ",W.W0[16]," ",W.W0[8]," ",W.W0[28],";"+(true?"":0),true?"":0)};var Hn=r(3224);function Yn(t){"@babel/helpers - typeof";return Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn(t)}function $n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Kn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(r),!0).forEach((function(e){Xn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xn(t,e,r){e=to(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function to(t){var e=eo(t,"string");return Yn(e)==="symbol"?e:String(e)}function eo(t,e){if(Yn(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Yn(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ro(){ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return ro.apply(this,arguments)}var no=(0,J.zs)();var oo=function t(e){var r=e.contentDripType;var n=(0,Kt.S)(),o=n.quizId,i=n.contentType;var s=(0,_.Gc)();var c=s.watch("quiz_option.feedback_mode");var l=(0,J.ro)(L.AO.CONTENT_DRIP)&&r==="unlock_sequentially"&&c==="retry";var d=s.watch("quiz_option.content_drip_settings.prerequisites");var f=(0,E.NL)();var v=f.getQueryData(["Topic",no]);return(0,a.tZ)("div",{css:ao.settings},(0,a.tZ)(Hn.Z,{title:(0,u.__)("Basic Settings","tutor"),collapsedAnimationDependencies:[c,d===null||d===void 0?void 0:d.length]},(0,a.tZ)("div",{css:ao.formWrapper},(0,a.tZ)(w.Z,{when:i!=="tutor_h5p_quiz"},(0,a.tZ)("div",{css:ao.timeWrapper},(0,a.tZ)(_.Qr,{name:"quiz_option.time_limit.time_value",control:s.control,render:function t(e){return(0,a.tZ)(k.Z,ro({},e,{type:"number",label:(0,u.__)("Time Limit","tutor"),helpText:(0,u.__)("Set a time limit for this quiz. A value of “0” indicates no time limit","tutor"),selectOnFocus:true}))}}),(0,a.tZ)(_.Qr,{name:"quiz_option.time_limit.time_type",control:s.control,render:function t(e){return(0,a.tZ)(A.Z,ro({},e,{options:[{label:(0,u.__)("Seconds","tutor"),value:"seconds"},{label:(0,u.__)("Minutes","tutor"),value:"minutes"},{label:(0,u.__)("Hours","tutor"),value:"hours"},{label:(0,u.__)("Days","tutor"),value:"days"},{label:(0,u.__)("Weeks","tutor"),value:"weeks"}]}))}}))),(0,a.tZ)(w.Z,{when:i!=="tutor_h5p_quiz"},(0,a.tZ)(_.Qr,{name:"quiz_option.hide_quiz_time_display",control:s.control,render:function t(e){return(0,a.tZ)(ct.Z,ro({},e,{label:(0,u.__)("Hide Quiz Time","tutor")}))}}),(0,a.tZ)(_.Qr,{name:"quiz_option.feedback_mode",control:s.control,render:function t(e){return(0,a.tZ)(A.Z,ro({},e,{label:(0,u.__)("Feedback Mode","tutor"),leftIcon:(0,a.tZ)(p.Z,{name:"eye",width:32,height:32}),options:[{label:(0,u.__)("Default","tutor"),value:"default",description:(0,u.__)("Answers are shown after finishing the quiz.","tutor")},{label:(0,u.__)("Reveal Mode","tutor"),value:"reveal",description:(0,u.__)("Show answer after attempting the question.","tutor")},{label:(0,u.__)("Retry","tutor"),value:"retry",description:(0,u.__)("Allows students to retake the quiz after their first attempt.","tutor")}]}))}})),(0,a.tZ)(w.Z,{when:c==="retry"},(0,a.tZ)(_.Qr,{name:"quiz_option.attempts_allowed",control:s.control,rules:{max:20,min:0},render:function t(e){return(0,a.tZ)(k.Z,ro({},e,{type:"number",label:(0,u.__)("Attempts Allowed","tutor"),helpText:(0,u.__)('Define how many times a student can retake this quiz. Setting it to "0" allows unlimited attempts',"tutor"),selectOnFocus:true}))}})),(0,a.tZ)(w.Z,{when:l&&i!=="tutor_h5p_quiz"},(0,a.tZ)(_.Qr,{name:"quiz_option.pass_is_required",control:s.control,render:function t(e){return(0,a.tZ)(ct.Z,ro({},e,{label:(0,u.__)("Passing is Required","tutor"),helpText:(0,u.__)("By enabling this option, the student must have to pass it to access the next quiz","tutor")}))}})),(0,a.tZ)(_.Qr,{name:"quiz_option.passing_grade",control:s.control,render:function t(e){return(0,a.tZ)(T.Z,ro({},e,{label:(0,u.__)("Passing Grade","tutor"),helpText:(0,u.__)("Set the minimum score percentage required to pass this quiz","tutor"),content:"%",contentPosition:"right",contentCss:dt.i.inputCurrencyStyle}))}}),(0,a.tZ)(w.Z,{when:i!=="tutor_h5p_quiz"},(0,a.tZ)(_.Qr,{name:"quiz_option.max_questions_for_answer",control:s.control,render:function t(e){return(0,a.tZ)(k.Z,ro({},e,{type:"number",label:(0,u.__)("Max Question Allowed to Answer","tutor"),helpText:(0,u.__)("Set the number of quiz questions randomly from your question pool. If the set number exceeds available questions, all questions will be included","tutor"),selectOnFocus:true}))}})),(0,a.tZ)(w.Z,{when:(0,J.ro)(L.AO.CONTENT_DRIP)&&i!=="tutor_h5p_quiz"},(0,a.tZ)(w.Z,{when:r==="specific_days"},(0,a.tZ)(_.Qr,{name:"quiz_option.content_drip_settings.after_xdays_of_enroll",control:s.control,render:function t(e){return(0,a.tZ)(k.Z,ro({},e,{type:"number",label:(0,a.tZ)("div",{css:ao.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Available after days","tutor")),helpText:(0,u.__)("This quiz will be available after the given number of days.","tutor"),placeholder:"0",selectOnFocus:true}))}})),(0,a.tZ)(w.Z,{when:r==="unlock_by_date"},(0,a.tZ)(_.Qr,{name:"quiz_option.content_drip_settings.unlock_date",control:s.control,render:function t(e){return(0,a.tZ)(j.Z,ro({},e,{label:(0,a.tZ)("div",{css:ao.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Unlock Date","tutor")),placeholder:(0,u.__)("Select Unlock Date","tutor"),helpText:(0,u.__)("This quiz will be available from the given date. Leave empty to make it available immediately.","tutor")}))}})),(0,a.tZ)(w.Z,{when:r==="after_finishing_prerequisites"},(0,a.tZ)(_.Qr,{name:"quiz_option.content_drip_settings.prerequisites",control:s.control,render:function t(e){return(0,a.tZ)(z.Z,ro({},e,{label:(0,a.tZ)("div",{css:ao.contentDripLabel},(0,a.tZ)(p.Z,{name:"contentDrip",height:24,width:24}),(0,u.__)("Prerequisites","tutor")),placeholder:(0,u.__)("Select Prerequisite","tutor"),options:v.reduce((function(t,e){t.push(Kn(Kn({},e),{},{contents:e.contents.filter((function(t){return t.ID!==o}))}));return t}),[])||[],isSearchable:true,helpText:(0,u.__)("Select items that should be complete before this item","tutor")}))}}))))),(0,a.tZ)(Hn.Z,{title:(0,u.__)("Advanced Settings","tutor")},(0,a.tZ)("div",{css:ao.formWrapper},(0,a.tZ)(_.Qr,{name:"quiz_option.quiz_auto_start",control:s.control,render:function t(e){return(0,a.tZ)(ct.Z,ro({},e,{label:(0,u.__)("Quiz Auto Start","tutor"),helpText:(0,u.__)("When enabled, the quiz begins immediately as soon as the page loads","tutor")}))}}),(0,a.tZ)("div",{css:ao.questionLayoutAndOrder},(0,a.tZ)(w.Z,{when:i!=="tutor_h5p_quiz"},(0,a.tZ)(_.Qr,{name:"quiz_option.question_layout_view",control:s.control,render:function t(e){return(0,a.tZ)(A.Z,ro({},e,{label:(0,u.__)("Question Layout","tutor"),placeholder:(0,u.__)("Select an option","tutor"),options:[{label:(0,u.__)("Single question","tutor"),value:"single_question"},{label:(0,u.__)("Question pagination","tutor"),value:"question_pagination"},{label:(0,u.__)("Question below each other","tutor"),value:"question_below_each_other"}]}))}})),(0,a.tZ)(_.Qr,{name:"quiz_option.questions_order",control:s.control,render:function t(e){return(0,a.tZ)(A.Z,ro({},e,{label:(0,u.__)("Question Order","tutor"),placeholder:(0,u.__)("Select an option","tutor"),options:[{label:(0,u.__)("Random","tutor"),value:"rand"},{label:(0,u.__)("Sorting","tutor"),value:"sorting"},{label:(0,u.__)("Ascending","tutor"),value:"asc"},{label:(0,u.__)("Descending","tutor"),value:"desc"}]}))}})),(0,a.tZ)(w.Z,{when:i!=="tutor_h5p_quiz"},(0,a.tZ)(_.Qr,{name:"quiz_option.hide_question_number_overview",control:s.control,render:function t(e){return(0,a.tZ)(ct.Z,ro({},e,{label:(0,u.__)("Hide Question Number","tutor")}))}}),(0,a.tZ)(_.Qr,{name:"quiz_option.short_answer_characters_limit",control:s.control,render:function t(e){return(0,a.tZ)(k.Z,ro({},e,{type:"number",label:(0,u.__)("Set Character Limit for Short Answers","tutor"),selectOnFocus:true}))}}),(0,a.tZ)(_.Qr,{name:"quiz_option.open_ended_answer_characters_limit",control:s.control,render:function t(e){return(0,a.tZ)(k.Z,ro({},e,{label:(0,u.__)("Set Character Limit for Open-Ended/Essay Answers","tutor"),selectOnFocus:true}))}})))))};const io=oo;var ao={settings:(0,a.iv)(dt.i.display.flex("column")," gap:",W.W0[24],";"+(true?"":0),true?"":0),formWrapper:(0,a.iv)(dt.i.display.flex("column")," gap:",W.W0[20],";"+(true?"":0),true?"":0),timeWrapper:(0,a.iv)(dt.i.display.flex()," align-items:flex-end;gap:",W.W0[8],";"+(true?"":0),true?"":0),questionLayoutAndOrder:(0,a.iv)(dt.i.display.flex()," gap:",W.W0[20],";"+(true?"":0),true?"":0),contentDripLabel:(0,a.iv)("display:flex;align-items:center;svg{margin-right:",W.W0[4],";color:",W.Jv.icon.success,";}"+(true?"":0),true?"":0)};var uo=r(7151);var so=r(7363);function co(t){"@babel/helpers - typeof";return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},co(t)}function lo(){lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return lo.apply(this,arguments)}function fo(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fo=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new q(o||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(S([])));_&&_!==e&&r.call(_,i)&&(h=_);var m=v.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,i,a,u){var s=l(t[n],t,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==co(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){o(r,n,t,e)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),s(m,u,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,q.prototype={constructor:q,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function o(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function t(e,n){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function po(t,e,r,n,o,i,a){try{var u=t[i](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,o)}}function vo(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){po(i,n,o,a,u,"next",t)}function u(t){po(i,n,o,a,u,"throw",t)}a(undefined)}))}}function ho(t,e){return bo(t)||go(t,e)||_o(t,e)||yo()}function yo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _o(t,e){if(!t)return;if(typeof t==="string")return mo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mo(t,e)}function mo(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function go(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function bo(t){if(Array.isArray(t))return t}var wo=(0,J.zs)();var Zo=function t(e){var r=e.closeModal,n=e.icon,o=e.title,i=e.subtitle,c=e.quizId,l=e.topicId,v=e.contentDripType,h=e.contentType;var y=(0,s.useState)(false),m=ho(y,2),b=m[0],Z=m[1];var O=(0,s.useState)("details"),x=ho(O,2),q=x[0],S=x[1];var E=(0,s.useState)(!(0,uo.$K)(c)),j=ho(E,2),P=j[0],T=j[1];var A=(0,s.useRef)(null);var z=(0,yt.UN)();var I=(0,yt.nz)(c||"");var C=(0,g.p)(),W=C.showToast;var N=(0,F.O)({defaultValues:{quiz_option:{time_limit:{time_value:0,time_type:"minutes"},hide_quiz_time_display:false,feedback_mode:"retry",attempts_allowed:10,passing_grade:80,max_questions_for_answer:h==="tutor_h5p_quiz"?0:10,quiz_auto_start:false,question_layout_view:h==="tutor_h5p_quiz"?"question_below_each_other":"single_question",questions_order:"rand",hide_question_number_overview:false,short_answer_characters_limit:200,open_ended_answer_characters_limit:500,content_drip_settings:{unlock_date:"",after_xdays_of_enroll:0,prerequisites:[]}},questions:[]},shouldFocusError:true});var Q=!!Object.values(N.formState.dirtyFields).some((function(t){return t}));(0,s.useEffect)((function(){var t=function t(e){if(Q){e.preventDefault();return}N.reset()};window.addEventListener("beforeunload",t);return function(){window.removeEventListener("beforeunload",t)}}),[Q]);(0,s.useEffect)((function(){if(!I.data){return}var t=(0,yt.MM)(I.data);N.reset(t)}),[I.data]);var U=function(){var t=vo(fo().mark((function t(e,n,o){var i,a,s;return fo().wrap((function t(c){while(1)switch(c.prev=c.next){case 0:if(e.quiz_title){c.next=4;break}S("details");Promise.resolve().then((function(){N.trigger("quiz_title",{shouldFocus:true})}));return c.abrupt("return");case 4:if(!(e.questions.length===0)){c.next=8;break}S("details");W({message:(0,u.__)("Please add a question","tutor"),type:"danger"});return c.abrupt("return");case 8:i=(0,J.aU)(n,N);if(!(i!==true)){c.next=13;break}o(i);S("details");return c.abrupt("return");case 13:T(false);a=(0,yt.pi)(e,l,v,wo);c.next=17;return z.mutateAsync(a);case 17:s=c.sent;if(s.data){T(false);r({action:"CONFIRM"});N.reset()}case 19:case"end":return c.stop()}}),t)})));return function e(r,n,o){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(P){N.setFocus("quiz_title")}}),[P]);return(0,a.tZ)(_.RV,N,(0,a.tZ)(Kt.$,{quizId:c||"",contentType:h||"tutor_quiz"},(function(t){var e=t.activeQuestionIndex,s=t.activeQuestionId,l=t.setActiveQuestionId,y=t.setValidationError;return(0,a.tZ)(D.Z,{onClose:function t(){return r({action:"CLOSE"})},icon:Q?(0,a.tZ)(p.Z,{name:"warning",width:24,height:24}):n,title:Q?(0,u.__)("Unsaved Changes","tutor"):o,subtitle:i,headerChildren:(0,a.tZ)($t.Z,{wrapperCss:(0,a.iv)("height:",L.oC.HEADER_HEIGHT,"px;"+(true?"":0),true?"":0),activeTab:q,tabList:[{label:(0,u.__)("Question Details","tutor"),value:"details"},{label:(0,u.__)("Settings","tutor"),value:"settings"}],onChange:function t(e){return S(e)}}),actions:Q&&(0,a.tZ)(so.Fragment,null,(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){if(Q){Z(true);return}r()},ref:A},c?(0,u.__)("Discard Changes","tutor"):(0,u.__)("Cancel","tutor")),(0,a.tZ)(w.Z,{when:q==="settings"||c,fallback:(0,a.tZ)(d.Z,{variant:"primary",size:"small",onClick:function t(){return S("settings")}},(0,u.__)("Next","tutor"))},(0,a.tZ)(d.Z,{loading:z.isPending,variant:"primary",size:"small",onClick:N.handleSubmit((function(t){return U(t,e,y)}))},(0,u.__)("Save","tutor"))))},(0,a.tZ)("div",{css:xo.wrapper({activeTab:q,isH5pQuiz:h==="tutor_h5p_quiz"})},(0,a.tZ)(w.Z,{when:!I.isLoading,fallback:(0,a.tZ)(f.fz,null)},(0,a.tZ)(w.Z,{when:q==="details"},(0,a.tZ)("div",{css:xo.left},(0,a.tZ)(w.Z,{when:q==="details"},(0,a.tZ)("div",{css:xo.quizTitleWrapper},(0,a.tZ)(w.Z,{when:P,fallback:(0,a.tZ)("div",{role:"button",tabIndex:0,css:xo.quizNameWithButton},(0,a.tZ)("span",{css:xo.quizTitle},N.getValues("quiz_title")),(0,a.tZ)(d.Z,{variant:"text",type:"button",onClick:function t(){return T(true)}},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24})))},(0,a.tZ)("div",{css:xo.quizForm},(0,a.tZ)(_.Qr,{control:N.control,name:"quiz_title",rules:{required:(0,u.__)("Quiz title is required","tutor")},render:function t(e){return(0,a.tZ)(k.Z,lo({},e,{placeholder:(0,u.__)("Add quiz title","tutor"),selectOnFocus:true}))}}),(0,a.tZ)(_.Qr,{control:N.control,name:"quiz_description",render:function t(e){return(0,a.tZ)(Ht.Z,lo({},e,{placeholder:(0,u.__)("Add a summary","tutor"),enableResize:false,rows:2}))}}),(0,a.tZ)("div",{css:xo.quizFormButtonWrapper},(0,a.tZ)(d.Z,{variant:"text",type:"button",onClick:function t(){if(!N.watch("quiz_title")){r()}T(false)},size:"small"},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{loading:z.isPending,variant:"secondary",type:"submit",size:"small",onClick:function t(){if(!N.getValues("quiz_title")){N.trigger("quiz_title");return}T(false)}},(0,u.__)("Ok","tutor")))))),(0,a.tZ)(Bn,{isEditing:P})))),(0,a.tZ)("div",{css:xo.content({activeTab:q})},(0,a.tZ)(w.Z,{when:q==="settings",fallback:(0,a.tZ)(cn,null)},(0,a.tZ)(io,{contentDripType:v}))),(0,a.tZ)(w.Z,{when:q==="details"&&h!=="tutor_h5p_quiz"},(0,a.tZ)("div",{css:xo.right},(0,a.tZ)(le,null))))),(0,a.tZ)(Yt.Z,{isOpen:b,triggerRef:A,closePopover:function t(){return Z(false)},maxWidth:"258px",title:(0,u.__)("Your quiz has unsaved changes. If you cancel, you will lose your progress.","tutor"),message:(0,u.__)("Are you sure you want to continue?","tutor"),animationType:dn.ru.slideUp,arrow:"top",positionModifier:{top:-50,left:c?88:q==="settings"?30:26},hideArrow:true,confirmButton:{text:(0,u.__)("Yes","tutor"),variant:"primary"},cancelButton:{text:(0,u.__)("No","tutor"),variant:"text"},onConfirmation:function t(){var e;N.reset();y(null);if(!((e=I.data)!==null&&e!==void 0&&e.questions.find((function(t){return t.question_id===s})))){l("")}if(!c){r()}}}))})))};const Oo=Zo;var xo={wrapper:function t(e){var r=e.activeTab,n=e.isH5pQuiz;return(0,a.iv)("width:1218px;display:grid;grid-template-columns:",r==="details"?n?"513px 1fr":"352px 1fr 280px":"1fr",";height:100%;"+(true?"":0),true?"":0)},left:(0,a.iv)("border-right:1px solid ",W.Jv.stroke.divider,";"+(true?"":0),true?"":0),content:function t(e){var r=e.activeTab;return(0,a.iv)(dt.i.overflowYAuto,";padding:",W.W0[32]," 0 ",W.W0[48]," ",W.W0[6],";",r==="settings"&&(0,a.iv)("padding-top:",W.W0[24],";padding-inline:352px 352px;"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},right:(0,a.iv)(dt.i.overflowYAuto,";",dt.i.display.flex("column"),";gap:",W.W0[16],";border-left:1px solid ",W.Jv.stroke.divider,";"+(true?"":0),true?"":0),quizTitleWrapper:(0,a.iv)(N.c.caption(),";color:",W.Jv.text.subdued,";padding:",W.W0[16]," ",W.W0[32]," ",W.W0[16]," ",W.W0[28],";border-bottom:1px solid ",W.Jv.stroke.divider,";"+(true?"":0),true?"":0),quizNameWithButton:(0,a.iv)("display:inline-flex;width:100%;transition:all 0.3s ease-in-out;button{display:none;}:hover,:focus-within{button{display:block;}}:focus-visible{outline:2px solid ",W.Jv.stroke.brand,";border-radius:",W.E0[6],";button{display:block;}}"+(true?"":0),true?"":0),quizTitle:(0,a.iv)("flex:1;padding:",W.W0[8]," ",W.W0[16]," ",W.W0[8]," ",W.W0[8],";background-color:",W.Jv.background.white,";border-radius:",W.E0[6],";"+(true?"":0),true?"":0),quizForm:(0,a.iv)("display:flex;flex-direction:column;gap:",W.W0[12],";"+(true?"":0),true?"":0),quizFormButtonWrapper:(0,a.iv)("display:flex;justify-content:end;margin-top:",W.W0[4],";gap:",W.W0[8],";"+(true?"":0),true?"":0)};var qo=r(7363);function So(t){"@babel/helpers - typeof";return So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},So(t)}function Eo(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=zo(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var o=function t(){};return{s:o,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function jo(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */jo=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new q(o||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(S([])));_&&_!==e&&r.call(_,i)&&(h=_);var m=v.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,i,a,u){var s=l(t[n],t,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==So(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){o(r,n,t,e)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),s(m,u,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,q.prototype={constructor:q,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function o(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function t(e,n){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function Po(t,e,r,n,o,i,a){try{var u=t[i](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,o)}}function ko(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Po(i,n,o,a,u,"next",t)}function u(t){Po(i,n,o,a,u,"throw",t)}a(undefined)}))}}function To(t,e){return Co(t)||Do(t,e)||zo(t,e)||Ao()}function Ao(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function zo(t,e){if(!t)return;if(typeof t==="string")return Io(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Io(t,e)}function Io(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Do(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function Co(t){if(Array.isArray(t))return t}function Lo(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Wo=(0,J.zs)();var No=!!C.y.tutor_pro_url;var Qo=(0,J.ro)(L.AO.TUTOR_GOOGLE_MEET_INTEGRATION)||(0,J.ro)(L.AO.TUTOR_ZOOM_INTEGRATION);var Jo=function t(e){var r=e.topic;var n=(0,J.Wj)("topic-",r.id);var o=(0,g.p)(),i=o.showToast;var c=(0,b.d)(),l=c.showModal;var f=(0,_.Gc)();var v=(0,s.useState)(null),h=To(v,2),y=h[0],j=h[1];var P=(0,s.useState)(false),k=To(P,2),T=k[0],A=k[1];var z=(0,s.useRef)(null);var I=(0,s.useRef)(null);var D=(0,yt.$$)();var C=(0,E.NL)();var N=C.getQueryData(["CourseDetails",Number(Wo)]);var Q=(0,Z.tZ)({acceptedTypes:[".csv"],onUpload:function(){var t=ko(jo().mark((function t(e){return jo().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return D.mutateAsync({topic_id:n,csv_file:e[0]});case 2:A(false);case 3:case"end":return r.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),onError:function t(e){var r=Eo(e),n;try{for(r.s();!(n=r.n()).done;){var o=n.value;i({message:o,type:"danger"})}}catch(t){r.e(t)}finally{r.f()}A(false)}}),F=Q.fileInputRef,G=Q.handleChange;return(0,a.tZ)(qo.Fragment,null,(0,a.tZ)("div",{css:Uo.contentButtons},(0,a.tZ)("div",{css:[dt.i.display.flex(),{gap:W.W0[12]},true?"":0,true?"":0]},(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:Uo.contentButton,onClick:function t(){l({component:Bt,props:{contentDripType:f.watch("contentDripType"),topicId:n,title:(0,u.__)("Lesson","tutor"),icon:(0,a.tZ)(p.Z,{name:"lesson",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)}})}},(0,u.__)("Lesson","tutor")),(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:Uo.contentButton,onClick:function t(){l({component:Oo,props:{topicId:n,contentDripType:f.watch("contentDripType"),title:(0,u.__)("Quiz","tutor"),icon:(0,a.tZ)(p.Z,{name:"quiz",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)},closeOnEscape:false})}},(0,u.__)("Quiz","tutor")),(0,a.tZ)(w.Z,{when:!No,fallback:(0,a.tZ)(w.Z,{when:(0,J.ro)(L.AO.H5P_INTEGRATION)},(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:Uo.contentButton,onClick:function t(){l({component:Oo,props:{topicId:n,contentDripType:f.watch("contentDripType"),title:(0,u.__)("Interactive Quiz","tutor"),icon:(0,a.tZ)(p.Z,{name:"interactiveQuiz",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title),contentType:"tutor_h5p_quiz"},closeOnEscape:false})}},(0,u.__)("Interactive Quiz","tutor")))},(0,a.tZ)(m.Z,null,(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:true,onClick:U.ZT},(0,u.__)("Interactive Quiz","tutor")))),(0,a.tZ)(w.Z,{when:!No,fallback:(0,a.tZ)(w.Z,{when:(0,J.ro)(L.AO.TUTOR_ASSIGNMENTS)},(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:!r.isSaved,buttonCss:Uo.contentButton,onClick:function t(){l({component:it,props:{topicId:n,contentDripType:f.watch("contentDripType"),title:(0,u.__)("Assignment","tutor"),icon:(0,a.tZ)(p.Z,{name:"assignment",width:24,height:24}),subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),r.title)}})}},(0,u.__)("Assignment","tutor")))},(0,a.tZ)(m.Z,null,(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"plus",width:24,height:24}),disabled:true,onClick:U.ZT},(0,u.__)("Assignment","tutor"))))),(0,a.tZ)("div",{css:Uo.footerButtons},(0,a.tZ)(w.Z,{when:!No||Qo,fallback:(0,a.tZ)(w.Z,{when:No,fallback:(0,a.tZ)(m.Z,null,(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"import",width:24,height:24}),disabled:true,onClick:U.ZT},(0,u.__)("Import Quiz","tutor")))},(0,a.tZ)(w.Z,{when:(0,J.ro)(L.AO.QUIZ_EXPORT_IMPORT)},(0,a.tZ)(d.Z,{variant:"tertiary",isOutlined:true,size:"small",icon:(0,a.tZ)(p.Z,{name:"import",width:24,height:24}),disabled:!r.isSaved,buttonCss:Uo.contentButton,onClick:function t(){var e;F===null||F===void 0?void 0:(e=F.current)===null||e===void 0?void 0:e.click()}},(0,u.__)("Import Quiz","tutor"))))},(0,a.tZ)(x.Z,{isOpen:T,onClick:function t(){return A(true)},closePopover:function t(){return A(false)},disabled:!r.isSaved,dotsOrientation:"vertical",maxWidth:No?"220px":"240px",isInverse:true,arrowPosition:"auto",hideArrow:true,closeOnEscape:false},(0,a.tZ)(w.Z,{when:!No||(0,J.ro)(L.AO.TUTOR_GOOGLE_MEET_INTEGRATION)},(0,a.tZ)(x.Z.Option,{text:(0,a.tZ)("span",{ref:z,css:Uo.threeDotButton},(0,u.__)("Meet live lesson","tutor"),(0,a.tZ)(w.Z,{when:!No},(0,a.tZ)(m.Z,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!No,icon:(0,a.tZ)(p.Z,{width:24,height:24,name:"googleMeetColorize",isColorIcon:true}),onClick:function t(){return j("tutor-google-meet")}})),(0,a.tZ)(w.Z,{when:!No||(0,J.ro)(L.AO.TUTOR_ZOOM_INTEGRATION)},(0,a.tZ)(x.Z.Option,{text:(0,a.tZ)("span",{ref:I,css:Uo.threeDotButton},(0,u.__)("Zoom live lesson","tutor"),(0,a.tZ)(w.Z,{when:!No},(0,a.tZ)(m.Z,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!No,icon:(0,a.tZ)(p.Z,{width:24,height:24,name:"zoomColorize",isColorIcon:true}),onClick:function t(){return j("tutor_zoom_meeting")}})),(0,a.tZ)(w.Z,{when:!No||(0,J.ro)(L.AO.QUIZ_EXPORT_IMPORT)},(0,a.tZ)(x.Z.Option,{text:(0,a.tZ)("span",{css:Uo.threeDotButton},(0,u.__)("Import Quiz","tutor"),(0,a.tZ)(w.Z,{when:!No},(0,a.tZ)(m.Z,{size:"small",content:(0,u.__)("Pro","tutor")}))),disabled:!No,onClick:function t(){var e;F===null||F===void 0?void 0:(e=F.current)===null||e===void 0?void 0:e.click()},icon:(0,a.tZ)(p.Z,{name:"importColorized",width:24,height:24,isColorIcon:true})})))))),(0,a.tZ)("input",{css:dt.i.display.none,type:"file",ref:F,onChange:G,multiple:false,accept:".csv"}),(0,a.tZ)(O.Z,{triggerRef:z,isOpen:y==="tutor-google-meet",closePopover:U.ZT,maxWidth:"306px",closeOnEscape:false},(0,a.tZ)(q.Z,{topicId:n,data:null,onCancel:function t(){j(null);A(false)}})),(0,a.tZ)(O.Z,{triggerRef:I,isOpen:y==="tutor_zoom_meeting",closePopover:U.ZT,maxWidth:"306px",closeOnEscape:false},(0,a.tZ)(S.Z,{topicId:n,meetingHost:(N===null||N===void 0?void 0:N.zoom_users)||{},data:null,onCancel:function t(){j(null);A(false)}})))};const Fo=Jo;var Uo={contentButtons:(0,a.iv)(dt.i.display.flex(),";justify-content:space-between;"+(true?"":0),true?"":0),footerButtons:true?{name:"s5xdrg",styles:"display:flex;align-items:center"}:0,threeDotButton:(0,a.iv)("display:flex;align-items:center;gap:",W.W0[4],";"+(true?"":0),true?"":0),contentButton:(0,a.iv)(":hover:not(:disabled){background-color:",W.Jv.background.white,";color:",W.Jv.text.brand,";outline:1px solid ",W.Jv.stroke.brand,";}"+(true?"":0),true?"":0)};var Go=r(9313);var Ro=r(7363);function Mo(t){"@babel/helpers - typeof";return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mo(t)}function Bo(){Bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Bo.apply(this,arguments)}function Vo(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Vo=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new q(o||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(S([])));_&&_!==e&&r.call(_,i)&&(h=_);var m=v.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,i,a,u){var s=l(t[n],t,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==Mo(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){o(r,n,t,e)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),s(m,u,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,q.prototype={constructor:q,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function o(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function t(e,n){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function Ho(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ho(Object(r),!0).forEach((function(e){$o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ho(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $o(t,e,r){e=Ko(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Ko(t){var e=Xo(t,"string");return Mo(e)==="symbol"?e:String(e)}function Xo(t,e){if(Mo(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Mo(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ti(t,e,r,n,o,i,a){try{var u=t[i](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,o)}}function ei(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ti(i,n,o,a,u,"next",t)}function u(t){ti(i,n,o,a,u,"throw",t)}a(undefined)}))}}function ri(t,e){return ui(t)||ai(t,e)||oi(t,e)||ni()}function ni(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oi(t,e){if(!t)return;if(typeof t==="string")return ii(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ii(t,e)}function ii(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ai(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function ui(t){if(Array.isArray(t))return t}function si(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var ci=(0,J.zs)();var li=!!C.y.tutor_pro_url;var di=function t(e){var r=e.topic,n=e.isEdit,o=e.isActive,i=e.listeners,c=e.isDragging,l=e.onCollapse,v=e.onEdit,h=e.onCopy,g=e.onDelete,b=e.setIsEdit;var Z=(0,J.Wj)("topic-",r.id);var O=(0,F.O)({defaultValues:{title:r.title,summary:r.summary},shouldFocusError:true});var x=(0,s.useState)(false),q=ri(x,2),S=q[0],E=q[1];var j=(0,s.useRef)(null);var P=(0,s.useRef)(null);var T=(0,Q.FV)();var A=(0,Q.P_)();var z=(0,Q.Wn)(ci);var I=(0,Go.m)({ref:j,isOpen:!r.isCollapsed,heightCalculator:"client"});var D=function(){var t=ei(Vo().mark((function t(e){var n;return Vo().wrap((function t(o){while(1)switch(o.prev=o.next){case 0:o.next=2;return T.mutateAsync(Yo(Yo({},r.isSaved&&{topic_id:Z}),{},{course_id:ci,title:e.title,summary:e.summary}));case 2:n=o.sent;if(n.data){if(n.status_code===201){v===null||v===void 0?void 0:v("topic-".concat(n.data))}b(false)}case 4:case"end":return o.stop()}}),t)})));return function e(r){return t.apply(this,arguments)}}();var C=function(){var t=ei(Vo().mark((function t(){var e;return Vo().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.next=2;return A.mutateAsync({course_id:ci,content_id:Z,content_type:"topic"});case 2:e=r.sent;if(e.data){h===null||h===void 0?void 0:h("topic-".concat(e.data))}case 4:case"end":return r.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(n){O.setFocus("title")}}),[n]);return(0,a.tZ)(Ro.Fragment,null,(0,a.tZ)("div",{css:yi.header({isCollapsed:r.isCollapsed,isEdit:n,isDeletePopoverOpen:S,isDragging:c})},(0,a.tZ)("div",{css:yi.headerContent({isSaved:r.isSaved})},(0,a.tZ)("div",{css:yi.grabberInput,onClick:function t(){return l(r.id)},onKeyDown:function t(e){if(e.key==="Enter"){l(r.id)}}},(0,a.tZ)("button",Bo({},r.isSaved?i:{},{css:yi.grabButton({isDragging:c}),type:"button",disabled:!r.isSaved}),(0,a.tZ)(p.Z,{name:"dragVertical",width:24,height:24})),(0,a.tZ)(w.Z,{when:n,fallback:(0,a.tZ)("div",{css:yi.title({isEdit:n}),onDoubleClick:function t(){return b(true)}},O.watch("title"))},(0,a.tZ)("div",{css:yi.title({isEdit:n})},(0,a.tZ)(_.Qr,{control:O.control,name:"title",rules:{required:(0,u.__)("Title is required","tutor")},render:function t(e){return(0,a.tZ)(k.Z,Bo({},e,{placeholder:(0,u.__)("Add a title","tutor"),isSecondary:true,selectOnFocus:true}))}})))),(0,a.tZ)("div",{css:yi.actions,"data-visually-hidden":true},(0,a.tZ)(w.Z,{when:!n},(0,a.tZ)(ut.Z,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:!r.isSaved,onClick:function t(){b(true);if(r.isCollapsed){l===null||l===void 0?void 0:l(r.id)}}},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24})))),(0,a.tZ)(w.Z,{when:r.isSaved},(0,a.tZ)(w.Z,{when:!A.isPending,fallback:(0,a.tZ)(f.ZP,{size:24})},(0,a.tZ)(ut.Z,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.tZ)(w.Z,{when:!li,fallback:(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:!r.isSaved,onClick:C},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))},(0,a.tZ)(m.Z,{size:"tiny"},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:true,onClick:U.ZT},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))))))),(0,a.tZ)(w.Z,{when:r.isSaved},(0,a.tZ)(ut.Z,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:!r.isSaved,"data-visually-hidden":true,ref:P,onClick:function t(){E(true)}},(0,a.tZ)(p.Z,{name:"delete",width:24,height:24})))),(0,a.tZ)(w.Z,{when:r.isSaved},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:!r.isSaved,onClick:function t(){l===null||l===void 0?void 0:l(r.id)},"data-toggle-collapse":true},(0,a.tZ)(p.Z,{name:"chevronDown",width:24,height:24}))))),(0,a.tZ)(w.Z,{when:n,fallback:(0,a.tZ)(w.Z,{when:r.summary.length>0},(0,a.tZ)(y.q.div,{style:Yo({},I)},(0,a.tZ)("div",{css:yi.description({isEdit:n}),ref:j,onDoubleClick:function t(){return b(true)}},O.watch("summary"))))},(0,a.tZ)("div",{css:yi.description({isEdit:n})},(0,a.tZ)(_.Qr,{control:O.control,name:"summary",render:function t(e){return(0,a.tZ)(Ht.Z,Bo({},e,{placeholder:(0,u.__)("Add a summary","tutor"),isSecondary:true,rows:2,enableResize:true}))}}))),(0,a.tZ)(w.Z,{when:n},(0,a.tZ)("div",{css:yi.footer},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){if(!O.formState.isValid&&!r.isSaved){g===null||g===void 0?void 0:g()}O.reset();b(false)}},(0,u.__)("Cancel","tutor")),(0,a.tZ)(d.Z,{loading:T.isPending,variant:"secondary",size:"small",onClick:O.handleSubmit(D)},(0,u.__)("Ok","tutor"))))),(0,a.tZ)(Yt.Z,{isOpen:S,triggerRef:P,isLoading:z.isPending,closePopover:U.ZT,maxWidth:"258px",title:(0,u.sprintf)((0,u.__)('Delete topic "%s"',"tutor"),r.title),message:(0,u.__)("Are you sure you want to delete this content from your course? This cannot be undone.","tutor"),animationType:dn.ru.slideUp,arrow:"auto",hideArrow:true,confirmButton:{text:(0,u.__)("Delete","tutor"),variant:"text",isDelete:true},cancelButton:{text:(0,u.__)("Cancel","tutor"),variant:"text"},onConfirmation:ei(Vo().mark((function t(){return Vo().wrap((function t(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return z.mutateAsync(Z);case 2:E(false);g===null||g===void 0?void 0:g();case 4:case"end":return e.stop()}}),t)}))),onCancel:function t(){return E(false)}}))};const fi=di;var pi=true?{name:"jjyo93",styles:"padding-right:0"}:0;var vi=true?{name:"18g08sj",styles:"padding-bottom:0"}:0;var hi=true?{name:"21xn5r",styles:"transform:rotate(180deg)"}:0;var yi={header:function t(e){var r=e.isCollapsed,n=e.isEdit,o=e.isDeletePopoverOpen,i=e.isDragging;return(0,a.iv)("padding:",W.W0[12]," ",W.W0[16],";",dt.i.display.flex("column"),";[data-toggle-collapse]{transition:transform 0.3s ease-in-out;",!r&&hi,";}",!r&&(0,a.iv)("border-bottom:1px solid ",W.Jv.stroke.divider,";"+(true?"":0),true?"":0)," ",!n&&vi," ",!n&&!o&&(0,a.iv)("[data-visually-hidden]{opacity:0;transition:",!i?"opacity 0.3s ease-in-out":"none",";}:hover,:focus-within{[data-visually-hidden]{opacity:",i?0:1,";}}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},headerContent:function t(e){var r=e.isSaved,n=r===void 0?true:r;return(0,a.iv)("display:grid;grid-template-columns:",n?"1fr auto":"1fr",";gap:",W.W0[12],";width:100%;padding-bottom:",W.W0[12],";"+(true?"":0),true?"":0)},grabberInput:(0,a.iv)(dt.i.display.flex(),";align-items:center;gap:",W.W0[8],";svg{color:",W.Jv.color.black[40],";flex-shrink:0;}"+(true?"":0),true?"":0),grabButton:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.iv)(dt.i.resetButton,";",dt.i.flexCenter(),";cursor:",n?"grabbing":"grab",";:disabled{cursor:not-allowed;}&:focus-visible{outline:2px solid ",W.Jv.stroke.brand,";outline-offset:1px;border-radius:",W.E0[2],";}"+(true?"":0),true?"":0)},title:function t(e){var r=e.isEdit;return(0,a.iv)(N.c.body(),";color:",W.Jv.text.hints,";width:100%;",!r&&(0,a.iv)(dt.i.text.ellipsis(1),";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},description:function t(e){var r=e.isEdit;return(0,a.iv)(N.c.caption(),";color:",W.Jv.text.hints,";padding-inline:",W.W0[8],";margin-left:",W.W0[24],";padding-bottom:",W.W0[12],";",!r&&(0,a.iv)(dt.i.text.ellipsis(2),";"+(true?"":0),true?"":0)," ",r&&pi,";"+(true?"":0),true?"":0)},footer:(0,a.iv)("width:100%;text-align:right;",dt.i.display.flex(),";gap:",W.W0[8],";justify-content:end;"+(true?"":0),true?"":0),actions:(0,a.iv)(dt.i.display.flex(),";align-items:start;gap:",W.W0[8],";justify-content:end;"+(true?"":0),true?"":0)};var _i=r(7363);function mi(t){"@babel/helpers - typeof";return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mi(t)}function gi(){gi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return gi.apply(this,arguments)}function bi(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */bi=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function t(e,r,n){return e[r]=n}}function c(t,e,r,o){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),u=new q(o||[]);return n(a,"_invoke",{value:w(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var d={};function f(){}function p(){}function v(){}var h={};s(h,i,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(S([])));_&&_!==e&&r.call(_,i)&&(h=_);var m=v.prototype=f.prototype=Object.create(h);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,i,a,u){var s=l(t[n],t,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==mi(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,a,u)}),(function(t){o("throw",t,a,u)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return o("throw",t,a,u)}))}u(s.arg)}var i;n(this,"_invoke",{value:function t(r,n){function a(){return new e((function(t,e){o(r,n,t,e)}))}return i=i?i.then(a,a):a()}})}function w(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=Z(a,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function Z(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,Z(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:undefined,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),s(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),s(m,u,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,q.prototype={constructor:q,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function o(t,r){return u.type="throw",u.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function t(e,n){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(u)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),d},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var i=o.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:S(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),d}},t}function wi(t,e,r,n,o,i,a){try{var u=t[i](a);var s=u.value}catch(t){r(t);return}if(u.done){e(s)}else{Promise.resolve(s).then(n,o)}}function Zi(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){wi(i,n,o,a,u,"next",t)}function u(t){wi(i,n,o,a,u,"throw",t)}a(undefined)}))}}function Oi(t,e){return ji(t)||Ei(t,e)||qi(t,e)||xi()}function xi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qi(t,e){if(!t)return;if(typeof t==="string")return Si(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Si(t,e)}function Si(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ei(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function ji(t){if(Array.isArray(t))return t}function Pi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ki(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pi(Object(r),!0).forEach((function(e){Ti(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ti(t,e,r){e=Ai(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Ai(t){var e=zi(t,"string");return mi(e)==="symbol"?e:String(e)}function zi(t,e){if(mi(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(mi(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ii(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Di={lesson:{name:"lesson",color:W.Jv.icon["default"]},tutor_quiz:{name:"quiz",color:W.Jv.design.warning},tutor_assignments:{name:"assignment",color:W.Jv.icon.processing},tutor_zoom_meeting:{name:"zoomColorize",color:""},"tutor-google-meet":{name:"googleMeetColorize",color:""},tutor_h5p_quiz:{name:"interactiveQuiz",color:"#C984FE"}};var Ci={tutor_assignments:(0,u.__)("Are you sure you want to delete this assignment? All existing assignment submissions will be permanently deleted.","tutor"),tutor_quiz:(0,u.__)("Are you sure you want to delete this quiz? All existing quiz attempts will be permanently deleted.","tutor"),tutor_h5p_quiz:(0,u.__)("Are you sure you want to delete this interactive quiz? All existing quiz attempts will be permanently deleted.","tutor")};var Li={lesson:Bt,tutor_quiz:Oo,tutor_assignments:it,tutor_h5p_quiz:Oo};var Wi={lesson:(0,u.__)("Lesson","tutor"),tutor_quiz:(0,u.__)("Quiz","tutor"),tutor_assignments:(0,u.__)("Assignment","tutor"),tutor_h5p_quiz:(0,u.__)("Interactive Quiz","tutor")};var Ni={lesson:"lesson",tutor_quiz:"quiz",tutor_assignments:"assignment",tutor_h5p_quiz:"interactiveQuiz"};var Qi=function t(e){return(0,i.cP)(ki(ki({},e),{},{wasDragging:true}))};var Ji=!!C.y.tutor_pro_url;var Fi=(0,J.zs)();var Ui=function t(e){var r=e.type,n=e.topic,o=e.content,c=e.onCopy,l=e.onDelete,d=e.isOverlay,v=d===void 0?false:d;var y=(0,J.Wj)("topic-",n.id);var g=(0,J.Wj)("content-",o.id);var Z=(0,E.NL)();var x=Z.getQueryData(["CourseDetails",Number(Fi)]);var j=(0,_.Gc)();var P=(0,s.useState)(null),k=Oi(P,2),T=k[0],A=k[1];var z=(0,s.useState)(false),I=Oi(z,2),D=I[0],C=I[1];var N=(0,s.useRef)(null);var F=(0,s.useRef)(null);var G=Di[r];var R=(0,i.nB)({id:o.id,data:{type:"content"},animateLayoutChanges:Qi}),M=R.attributes,B=R.listeners,V=R.setNodeRef,H=R.transform,Y=R.transition,$=R.isDragging;var K={transform:h.ux.Transform.toString(H),transition:Y,opacity:$?.3:undefined,background:$?W.Jv.stroke.hover:undefined};var X=(0,b.d)(),tt=X.showModal;var et=(0,Q.P_)();var rt=(0,Q.PI)();var nt=(0,yt.T1)();var ot=(0,Q.PI)();var it=(0,Q.PI)();var at=(0,yt._l)();var st=function t(){var e=r;if(Li[e]){tt({component:Li[e],props:ki({contentDripType:j.watch("contentDripType"),topicId:y,lessonId:g,assignmentId:g,quizId:g,title:Wi[e],subtitle:(0,u.sprintf)((0,u.__)("Topic: %s","tutor"),n.title),icon:(0,a.tZ)(p.Z,{name:Ni[e],height:24,width:24})},r==="tutor_h5p_quiz"&&{contentType:"tutor_h5p_quiz"}),closeOnEscape:!["tutor_quiz","tutor_h5p_quiz"].includes(r)})}if(r==="tutor_zoom_meeting"){A("tutor_zoom_meeting")}if(r==="tutor-google-meet"){A("tutor-google-meet")}};var ct=function(){var t=Zi(bi().mark((function t(){return bi().wrap((function t(e){while(1)switch(e.prev=e.next){case 0:if(!["lesson","tutor_assignments"].includes(r)){e.next=5;break}e.next=3;return rt.mutateAsync(g);case 3:e.next=18;break;case 5:if(!["tutor_quiz","tutor_h5p_quiz"].includes(r)){e.next=10;break}e.next=8;return nt.mutateAsync(g);case 8:e.next=18;break;case 10:if(!(r==="tutor-google-meet")){e.next=15;break}e.next=13;return ot.mutateAsync(g);case 13:e.next=18;break;case 15:if(!(r==="tutor_zoom_meeting")){e.next=18;break}e.next=18;return it.mutateAsync(g);case 18:C(false);l===null||l===void 0?void 0:l();case 20:case"end":return e.stop()}}),t)})));return function e(){return t.apply(this,arguments)}}();var lt=function t(){var e={lesson:"lesson",tutor_assignments:"assignment",tutor_quiz:"quiz",tutor_h5p_quiz:"quiz"};et.mutateAsync({course_id:Fi,content_id:g,content_type:e[r]});c===null||c===void 0?void 0:c()};return(0,a.tZ)(_i.Fragment,null,(0,a.tZ)("div",gi({},M,{css:Mi.wrapper({isDragging:$,isOverlay:v,isActive:T===r||D||et.isPending}),ref:V,style:K}),(0,a.tZ)("div",gi({css:Mi.iconAndTitle({isDragging:v})},B),(0,a.tZ)("div",{"data-content-icon":true},(0,a.tZ)(p.Z,{name:G.name,width:24,height:24,style:(0,a.iv)("color:",G.color,";"+(true?"":0),true?"":0)})),(0,a.tZ)("div",{"data-bar-icon":true},(0,a.tZ)(p.Z,{name:"bars",width:24,height:24})),(0,a.tZ)("p",{css:Mi.title,onClick:st,onKeyDown:U.ZT},(0,a.tZ)("span",{dangerouslySetInnerHTML:{__html:o.title}}),(0,a.tZ)(w.Z,{when:(r==="tutor_quiz"||r==="tutor_h5p_quiz")&&!!o.total_question},(0,a.tZ)("span",{"data-question-count":true},"(",(0,u.sprintf)((0,u.__)("%s Questions","tutor"),o.total_question),")")))),(0,a.tZ)("div",{css:Mi.actions,"data-actions":true},(0,a.tZ)(w.Z,{when:r==="tutor_quiz"},(0,a.tZ)(ut.Z,{content:(0,u.__)("Export Quiz","tutor"),delay:200},(0,a.tZ)(w.Z,{when:!Ji,fallback:(0,a.tZ)(w.Z,{when:(0,J.ro)(L.AO.QUIZ_EXPORT_IMPORT)},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:function t(){at.mutate(g)}},(0,a.tZ)(p.Z,{name:"export",width:24,height:24})))},(0,a.tZ)(m.Z,{size:"tiny"},(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,disabled:true,onClick:U.ZT},(0,a.tZ)(p.Z,{name:"export",width:24,height:24})))))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Edit","tutor"),delay:200},(0,a.tZ)("button",{ref:N,type:"button",css:dt.i.actionButton,onClick:st},(0,a.tZ)(p.Z,{name:"edit",width:24,height:24}))),(0,a.tZ)(w.Z,{when:!["tutor_zoom_meeting","tutor_zoom_meeting"].includes(r)},(0,a.tZ)(w.Z,{when:!et.isPending,fallback:(0,a.tZ)(f.ZP,{size:24})},(0,a.tZ)(ut.Z,{content:(0,u.__)("Duplicate","tutor"),delay:200},(0,a.tZ)(w.Z,{when:!Ji,fallback:(0,a.tZ)("button",{type:"button",css:dt.i.actionButton,onClick:lt},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))},(0,a.tZ)(m.Z,{size:"tiny"},(0,a.tZ)("button",{disabled:true,type:"button",css:dt.i.actionButton,onClick:U.ZT},(0,a.tZ)(p.Z,{name:"copyPaste",width:24,height:24}))))))),(0,a.tZ)(ut.Z,{content:(0,u.__)("Delete","tutor"),delay:200},(0,a.tZ)("button",{ref:F,type:"button",css:dt.i.actionButton,onClick:function t(){C(true)}},(0,a.tZ)(p.Z,{name:"delete",width:24,height:24}))))),(0,a.tZ)(O.Z,{triggerRef:N,isOpen:T!==null,closePopover:U.ZT,maxWidth:"306px",closeOnEscape:false},(0,a.tZ)(w.Z,{when:T==="tutor_zoom_meeting"},(0,a.tZ)(S.Z,{data:null,topicId:y,meetingHost:(x===null||x===void 0?void 0:x.zoom_users)||{},onCancel:function t(){return A(null)},meetingId:g})),(0,a.tZ)(w.Z,{when:T==="tutor-google-meet"},(0,a.tZ)(q.Z,{data:null,topicId:y,onCancel:function t(){return A(null)},meetingId:g}))),(0,a.tZ)(Yt.Z,{isOpen:D,isLoading:rt.isPending||nt.isPending||ot.isPending,triggerRef:F,closePopover:U.ZT,maxWidth:"258px",title:(0,u.sprintf)((0,u.__)('Delete "%s"',"tutor"),o.title),message:Ci[r]||(0,u.__)("Are you sure you want to delete this content from your course? This cannot be undone.","tutor"),animationType:dn.ru.slideUp,arrow:"auto",hideArrow:true,confirmButton:{text:(0,u.__)("Delete","tutor"),variant:"text",isDelete:true},cancelButton:{text:(0,u.__)("Cancel","tutor"),variant:"text"},onConfirmation:ct,onCancel:function t(){return C(false)}}))};const Gi=Ui;var Ri=true?{name:"1jfpmb0",styles:"[data-content-icon]{display:none;}[data-bar-icon]{display:block;}cursor:grabbing"}:0;var Mi={wrapper:function t(e){var r=e.isDragging,n=r===void 0?false:r,o=e.isOverlay,i=o===void 0?false:o,u=e.isActive,s=u===void 0?false:u;return(0,a.iv)("width:100%;padding:",W.W0[10]," ",W.W0[8],";border:1px solid transparent;border-radius:",W.E0[6],";display:flex;justify-content:space-between;align-items:center;[data-content-icon],[data-bar-icon]{display:flex;height:24px;}:hover,:focus-within{border-color:",W.Jv.stroke.border,";background-color:",W.Jv.background.white,";[data-content-icon]{display:none;}[data-bar-icon]{display:block;}[data-actions]{opacity:",n?0:1,";}}",s&&(0,a.iv)("border-color:",W.Jv.stroke.border,";background-color:",W.Jv.background.white,";[data-content-icon]{display:flex;}[data-bar-icon]{display:none;}[data-actions]{opacity:1;}"+(true?"":0),true?"":0)," ",i&&(0,a.iv)("box-shadow:",W.AF.drag,";border-color:",W.Jv.stroke.border,";background-color:",W.Jv.background.white,";[data-actions]{opacity:1;}"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},title:(0,a.iv)(N.c.caption(),";color:",W.Jv.text.title,";display:flex;align-items:center;gap:",W.W0[4],";cursor:pointer;[data-question-count]{color:",W.Jv.text.hints,";}"+(true?"":0),true?"":0),iconAndTitle:function t(e){var r=e.isDragging,n=r===void 0?false:r;return(0,a.iv)("display:flex;align-items:center;gap:",W.W0[8],";cursor:grab;flex-grow:1;[data-bar-icon]{display:none;}",n&&Ri,";"+(true?"":0),true?"":0)},actions:(0,a.iv)("display:flex;opacity:0;align-items:start;gap:",W.W0[8],";justify-content:end;"+(true?"":0),true?"":0)};function Bi(t){"@babel/helpers - typeof";return Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(t)}function Vi(){Vi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){t[n]=r[n]}}}return t};return Vi.apply(this,arguments)}function Hi(t,e){return ta(t)||Xi(t,e)||$i(t,e)||Yi()}function Yi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $i(t,e){if(!t)return;if(typeof t==="string")return Ki(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ki(t,e)}function Ki(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xi(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function ta(t){if(Array.isArray(t))return t}function ea(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ra(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ea(Object(r),!0).forEach((function(e){na(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ea(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function na(t,e,r){e=oa(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function oa(t){var e=ia(t,"string");return Bi(e)==="symbol"?e:String(e)}function ia(t,e){if(Bi(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(Bi(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aa=function t(e){return(0,i.cP)(ra(ra({},e),{},{wasDragging:true}))};var ua=function t(e){var r;var n=e.topic,o=e.onDelete,u=e.onCopy,c=e.onSort,l=e.onCollapse,d=e.onEdit,f=e.isOverlay,p=f===void 0?false:f;var v=(0,s.useState)(false),_=Hi(v,2),m=_[0],g=_[1];var b=(0,s.useState)(!n.isSaved),Z=Hi(b,2),O=Z[0],x=Z[1];var q=(0,s.useRef)(null);var S=(0,s.useRef)(null);var E=(0,y.q_)({height:!n.isCollapsed?(r=q.current)===null||r===void 0?void 0:r.scrollHeight:0,opacity:!n.isCollapsed?1:0,overflow:"hidden",config:{duration:300,easing:function t(e){return e*(2-e)}}},[n.contents.length]),j=Hi(E,2),P=j[0],k=j[1];(0,s.useEffect)((function(){var t=function t(e){if((0,uo.$K)(S.current)&&!S.current.contains(e.target)){g(false)}};document.addEventListener("click",t);return function(){return document.removeEventListener("click",t)}}),[O]);var T=(0,i.nB)({id:n.id,data:{type:"topic"},animateLayoutChanges:aa}),A=T.attributes,z=T.listeners,I=T.setNodeRef,D=T.transform,C=T.transition,L=T.isDragging;var N=(0,s.useCallback)((function(t){if(t){I(t);S.current=t}}),[I]);var Q={transform:h.ux.Transform.toString(D),transition:C,opacity:L?.3:undefined,background:L?W.Jv.stroke.hover:undefined};(0,s.useEffect)((function(){if((0,uo.$K)(q.current)){k.start({height:!n.isCollapsed?q.current.scrollHeight:0,opacity:!n.isCollapsed?1:0})}}),[n.isCollapsed,n.contents.length]);return(0,a.tZ)("div",Vi({},n.isSaved?A:{},{css:ca.wrapper({isActive:m||O,isOverlay:p}),onClick:function t(){return g(true)},onKeyDown:U.ZT,tabIndex:-1,ref:N,style:Q}),(0,a.tZ)(fi,{isActive:m,isDragging:L,isEdit:O,listeners:z,onCollapse:function t(e){l===null||l===void 0?void 0:l(e)},onDelete:o,onEdit:function t(e){d===null||d===void 0?void 0:d(e)},onCopy:function t(e){u===null||u===void 0?void 0:u(e)},topic:n,setIsEdit:x}),(0,a.tZ)(y.q.div,{style:ra({},P)},(0,a.tZ)("div",{css:ca.content,ref:q},(0,a.tZ)(w.Z,{when:n.contents.length>0},(0,a.tZ)(i.Fo,{items:n.contents.map((function(t){return ra(ra({},t),{},{id:t.ID})})),strategy:i.qw},(0,a.tZ)("div",null,(0,a.tZ)(we.Z,{each:n.contents},(function(t){return(0,a.tZ)(Gi,{key:t.ID,type:t.post_type,topic:n,content:{id:t.ID,title:t.post_title,total_question:t.total_question||0}})}))))),(0,a.tZ)(Fo,{topic:n}))))};const sa=ua;var ca={wrapper:function t(e){var r=e.isActive,n=r===void 0?false:r,o=e.isOverlay,i=o===void 0?false:o;return(0,a.iv)("border:1px solid ",W.Jv.stroke["default"],";border-radius:",W.E0[8],";transition:background-color 0.3s ease-in-out,border-color 0.3s ease-in-out;background-color:",W.Jv.bg.white,";width:100%;",n&&(0,a.iv)("border-color:",W.Jv.stroke.brand,";background-color:",W.Jv.background.hover,";"+(true?"":0),true?"":0)," :hover{background-color:",W.Jv.background.hover,";}",i&&(0,a.iv)("box-shadow:",W.AF.drag,";"+(true?"":0),true?"":0),";"+(true?"":0),true?"":0)},content:(0,a.iv)("padding:",W.W0[16],";",dt.i.display.flex("column"),";gap:",W.W0[12],";"+(true?"":0),true?"":0)};var la=r(2322);var da=r(6051);const fa=r.p+"images/7a3f20a77fdf442a94bc38151eadcfcd-curriculum-empty-state-2x.webp";const pa=r.p+"images/986ea3637213dd5da688bb6f1e1319a6-curriculum-empty-state.webp";var va=function t(e){var r=e.title;return(0,a.tZ)("div",{css:ya.wrapper},(0,a.tZ)(p.Z,{name:"dragVertical",width:24,height:24}),(0,a.tZ)("span",null,r))};const ha=va;var ya={wrapper:(0,a.iv)("display:flex;align-items:center;gap:",W.W0[8],";border:1px solid ",W.Jv.stroke["default"],";border-radius:",W.E0[8],";background-color:",W.Jv.background.hover,";padding:",W.W0[12]," ",W.W0[16],";box-shadow:",W.AF.drag,";",N.c.body(),";color:",W.Jv.text.hints,";cursor:grabbing;svg{color:",W.Jv.color.black[40],";flex-shrink:0;}"+(true?"":0),true?"":0)};function _a(t){"@babel/helpers - typeof";return _a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(t)}function ma(t){return wa(t)||ba(t)||Pa(t)||ga()}function ga(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ba(t){if(typeof Symbol!=="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wa(t){if(Array.isArray(t))return ka(t)}function Za(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Za(Object(r),!0).forEach((function(e){xa(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Za(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xa(t,e,r){e=qa(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function qa(t){var e=Sa(t,"string");return _a(e)==="symbol"?e:String(e)}function Sa(t,e){if(_a(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(_a(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ea(t,e){return Aa(t)||Ta(t,e)||Pa(t,e)||ja()}function ja(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pa(t,e){if(!t)return;if(typeof t==="string")return ka(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ka(t,e)}function ka(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ta(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r["return"]&&(a=r["return"](),Object(a)!==a))return}finally{if(c)throw o}}return u}}function Aa(t){if(Array.isArray(t))return t}function za(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."}var Ia=(0,J.zs)();var Da=true?{name:"1wuky45",styles:"margin-block:40px"}:0;var Ca=function t(){var e=(0,l.s0)();(0,s.useEffect)((function(){if(!Ia){e("/",{replace:true})}}),[e]);if(!Ia){return null}var r=(0,s.useState)(true),h=Ea(r,2),y=h[0],_=h[1];var m=(0,s.useState)(null),g=Ea(m,2),b=g[0],Z=g[1];var O=(0,s.useState)([]),x=Ea(O,2),q=x[0],S=x[1];var E=(0,s.useRef)([]);var j=(0,Q.rM)(Ia);var P=(0,Q.AI)();(0,s.useEffect)((function(){if(q.length===0){return}S((function(t){if(y){E.current=[]}if(!y){E.current=t.reduce((function(t,e){if(e.isSaved){t.push(e.id)}return t}),[])}return t.map((function(t){if(!t.isSaved){return t}return Oa(Oa({},t),{},{isCollapsed:y})}))}))}),[y]);(0,s.useEffect)((function(){var t;if(!((t=j.data)!==null&&t!==void 0&&t.length)){return}var e=function t(e){return j.data.map((function(t,r){var n="topic-".concat(t.id);var o=r===0;var i=E.current.includes(n);var a=e.length?!i:!o;if(o&&!e.length){E.current=[n]}return Oa(Oa({},t),{},{id:n,isCollapsed:a,isSaved:true,contents:t.contents.map((function(t){return Oa(Oa({},t),{},{ID:"content-".concat(t.ID)})}))})}))};S(e)}),[j.data]);var k=(0,s.useMemo)((function(){if(!b){return null}var t=b.toString().includes("topic")?"topic":"content";var e=q.flatMap((function(t){return t.contents}));var r=t==="topic"?q.find((function(t){return t.id===b})):e.find((function(t){return t.ID===b}));return r}),[b,q]);var T=(0,n.Dy)((0,n.VT)(n.we,{activationConstraint:{distance:10}}),(0,n.VT)(n.Lg,{coordinateGetter:i.is}));if(j.isLoading){return(0,a.tZ)(f.fz,null)}var A=function t(e,r){if(r==="topic"){return q.find((function(t){return t.id===e}))}if(r==="content"){return q.find((function(t){return t.contents.find((function(t){return t.ID===e}))}))}};var z=function t(e){var r=e.active,n=e.over;if(!n||!r){return}if(r.id.toString().includes("content")&&n.id.toString().includes("content")&&r.id!==n.id){var o=A(r.id,"content");var i=A(n.id,"content");if(!o||!i)return;var a=q.findIndex((function(t){return t.id===o.id}));var u=q.findIndex((function(t){return t.id===i.id}));if(i.isCollapsed||a===u){return}var s=o.contents.findIndex((function(t){return t.ID===r.id}));var c=i.contents.findIndex((function(t){return t.ID===n.id}));var l=ma(q);var d=l[a].contents.splice(s,1),f=Ea(d,1),p=f[0];l[u].contents.splice(c,0,p);S(l)}if(r.id.toString().includes("content")&&n!==null&&n!==void 0&&n.id.toString().includes("topic")&&r.id!==n.id){var v=A(r.id,"content");var h=A(n.id,"topic");if(!v||!h||h.contents.length>0||h.isCollapsed){return}var y=q.findIndex((function(t){return t.id===v.id}));var _=q.findIndex((function(t){return t.id===h.id}));if(y===_){return}var m=v.contents.findIndex((function(t){return t.ID===r.id}));var g=ma(q);var b=g[y].contents.splice(m,1),w=Ea(b,1),Z=w[0];g[_].contents.push(Z);S(g)}};var I=function t(e){var r,n;var o=e.active,i=e.over;if(!i){Z(null);return}var a=ma(q);if(o.id.toString().includes("topic")&&i!==null&&i!==void 0&&i.id.toString().includes("topic")&&o&&o.id!==i.id){var u=q.findIndex((function(t){return t.id===o.id}));var s=q.findIndex((function(t){return t.id===i.id}));a=(0,U.Ao)(a,u,s);S(a)}if(o.id.toString().includes("content")&&i!==null&&i!==void 0&&i.id.toString().includes("content")&&o&&o.id!==i.id){var c=A(o.id,"content");var l=A(i.id,"content");if(!c||!l||l.isCollapsed){return}var d=q.findIndex((function(t){return t.id===c.id}));var f=q.findIndex((function(t){return t.id===l.id}));var p=c.contents.findIndex((function(t){return t.ID===o.id}));var v=l.contents.findIndex((function(t){return t.ID===i.id}));if(d===f){a[d].contents=(0,U.Ao)(a[d].contents,p,v);S(a)}else{var h=a[d].contents.splice(p,1),y=Ea(h,1),_=y[0];a[f].contents.splice(v,0,_);S(a)}}if(o.id.toString().includes("content")&&i.id.toString().includes("topic")&&o&&o.id!==i.id){var m=A(o.id,"content");var g=A(i.id,"topic");if(!m||!g||g.isCollapsed){return}var b=q.findIndex((function(t){return t.id===m.id}));var w=q.findIndex((function(t){return t.id===g.id}));var O=m.contents.findIndex((function(t){return t.ID===o.id}));var x=a[b].contents.splice(O,1),E=Ea(x,1),k=E[0];a[w].contents.push(k);S(a)}var T=a.reduce((function(t,e,r){var n=0;t[r]={topic_id:(0,J.Wj)("topic-",e.id),lesson_ids:e.contents.reduce((function(t,e){t[n]=(0,J.Wj)("content-",e.ID);n++;return t}),{})};return t}),{});P.mutate(Oa({tutor_topics_lessons_sorting:T},o.id.toString().includes("content")&&{"content_parent[parent_topic_id]":(r=j.data)===null||r===void 0?void 0:(n=r.find((function(t){return t.contents.find((function(t){return String(t.ID)===(0,J.Wj)("content-",i.id)}))})))===null||n===void 0?void 0:n.id,"content_parent[content_id]":(0,J.Wj)("content-",o.id)}));Z(null)};var D=function t(e,r){S((function(t){return t.filter((function(t,r){return r!==e}))}));E.current=E.current.filter((function(t){return t!==r}))};var C=function t(e){S((function(t){return t.map((function(t){if(t.id===e){return Oa(Oa({},t),{},{isCollapsed:!t.isCollapsed})}return t}))}));if(!E.current.includes(e)){E.current=[].concat(ma(E.current),[e])}else{E.current=E.current.filter((function(t){return t!==e}))}};return(0,a.tZ)("div",{css:Wa.container},(0,a.tZ)("div",{css:Wa.wrapper},(0,a.tZ)(la.Z,{title:(0,u.__)("Curriculum","tutor"),backUrl:"/basics",rightButton:(0,a.tZ)(w.Z,{when:q.some((function(t){return t.isSaved}))},(0,a.tZ)(d.Z,{variant:"text",size:"small",onClick:function t(){return _((function(t){return!t}))}},y?(0,u.__)("Expand All","tutor"):(0,u.__)("Collapse All","tutor")))}),(0,a.tZ)("div",{css:Wa.content},(0,a.tZ)(w.Z,{when:!j.isLoading&&q.length>0,fallback:(0,a.tZ)(v.Z,{emptyStateImage:pa,emptyStateImage2x:fa,imageAltText:(0,u.__)("Empty State Illustration","tutor"),title:(0,u.__)("Start building your course!","tutor"),description:(0,u.__)("Add Topics, Lessons, and Quizzes to get started.","tutor"),actions:(0,a.tZ)(d.Z,{variant:"secondary",icon:(0,a.tZ)(p.Z,{name:"plusSquareBrand",width:24,height:25}),onClick:function t(){S((function(){return[{id:(0,U.x0)(),title:"",summary:"",contents:[],isCollapsed:false,isSaved:false}]}))}},(0,u.__)("Add Topic","tutor"))})},(0,a.tZ)("div",{css:Wa.topicWrapper},(0,a.tZ)(n.LB,{sensors:T,collisionDetection:n.ey,measuring:fn.O,modifiers:[o.hg],onDragStart:function t(e){Z(e.active.id)},onDragOver:function t(e){return z(e)},onDragEnd:function t(e){return I(e)}},(0,a.tZ)(i.Fo,{items:q.map((function(t){return Oa(Oa({},t),{},{id:t.id})})),strategy:i.qw},(0,a.tZ)(we.Z,{each:q},(function(t,e){return t.isSaved&&(0,a.tZ)(sa,{key:t.id,topic:Oa(Oa({},t),{},{isCollapsed:b!==null&&b!==void 0&&b.toString().includes("topic")?true:t.isCollapsed}),onDelete:function r(){return D(e,t.id)},onCollapse:function t(e){return C(e)},onCopy:function t(e){E.current=[e]},onEdit:function t(e){E.current=[e]}})}))),(0,c.createPortal)((0,a.tZ)(n.y9,null,(0,a.tZ)(w.Z,{when:k},(function(t){return(0,a.tZ)(ha,{title:b!==null&&b!==void 0&&b.toString().includes("topic")?t.title:t.post_title})}))),document.body)),(0,a.tZ)(we.Z,{each:q},(function(t,e){return!t.isSaved&&(0,a.tZ)(sa,{key:t.id,topic:Oa(Oa({},t),{},{isCollapsed:false}),onDelete:function r(){return D(e,t.id)},onCollapse:function t(e){return C(e)},onCopy:function t(e){E.current=[e]},onEdit:function t(e){E.current=[e]}})}))))),(0,a.tZ)(w.Z,{when:q.length>0},(0,a.tZ)("div",{css:Wa.addButtonWrapper},(0,a.tZ)(d.Z,{variant:"secondary",icon:(0,a.tZ)(p.Z,{name:"plusSquareBrand",width:24,height:24}),onClick:function t(){S((function(t){return[].concat(ma(t.map((function(t){return Oa(Oa({},t),{},{isCollapsed:true})}))),[{id:(0,U.x0)(),title:"",summary:"",contents:[],isCollapsed:false,isSaved:false}])}));E.current=[]}},(0,u.__)("Add Topic","tutor"))))),(0,a.tZ)(da.Z,{styleModifier:Da}))};const La=Ca;var Wa={container:(0,a.iv)("margin-top:",W.W0[32],";"+(true?"":0),true?"":0),wrapper:(0,a.iv)("max-width:",W.V4,"px;width:100%;",dt.i.display.flex("column"),";gap:",W.W0[16],";"+(true?"":0),true?"":0),content:(0,a.iv)("margin-top:",W.W0[16],";"+(true?"":0),true?"":0),topicWrapper:(0,a.iv)(dt.i.display.flex("column"),";gap:",W.W0[16],";"+(true?"":0),true?"":0),addButtonWrapper:(0,a.iv)("path{stroke:",W.Jv.icon.brand,";}"+(true?"":0),true?"":0)}},5130:(t,e,r)=>{r.d(e,{$$:()=>P,HD:()=>W,JS:()=>C,MM:()=>q,T1:()=>F,UN:()=>z,_l:()=>T,dP:()=>x,nz:()=>D,pi:()=>S});var n=r(202);var o=r(6205);var i=r(8551);var a=r(8003);var u=r.n(a);var s=r(3389);var c=r(8305);var l=r(6413);var d=r(7034);var f=r(7307);var p=r(3603);var v=r(5219);function h(t){"@babel/helpers - typeof";return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function y(t,e){var r=typeof Symbol!=="undefined"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_(t))||e&&t&&typeof t.length==="number"){if(r)t=r;var n=0;var o=function t(){};return{s:o,n:function e(){if(n>=t.length)return{done:true};return{done:false,value:t[n++]}},e:function t(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,a=false,u;return{s:function e(){r=r.call(t)},n:function t(){var e=r.next();i=e.done;return e},e:function t(e){a=true;u=e},f:function t(){try{if(!i&&r["return"]!=null)r["return"]()}finally{if(a)throw u}}}}function _(t,e){if(!t)return;if(typeof t==="string")return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(t,e)}function m(t,e){if(e==null||e>t.length)e=t.length;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t,e,r){e=Z(e);if(e in t){Object.defineProperty(t,e,{value:r,enumerable:true,configurable:true,writable:true})}else{t[e]=r}return t}function Z(t){var e=O(t,"string");return h(e)==="symbol"?e:String(e)}function O(t,e){if(h(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==undefined){var n=r.call(t,e||"default");if(h(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x={NEW:"new",UPDATE:"update",NO_CHANGE:"no_change"};var q=function t(e){var r=function t(e){if(e.image_url){return e.answer_view_format==="text_image"?x.NO_CHANGE:x.UPDATE}return e.answer_view_format==="text"?x.NO_CHANGE:x.UPDATE};var n=function t(e){if(e.question_settings){e.question_settings.answer_required=!!Number(e.question_settings.answer_required);e.question_settings.show_question_mark=!!Number(e.question_settings.show_question_mark);e.question_settings.randomize_options=!!Number(e.question_settings.randomize_options)}e.question_answers=e.question_answers.map((function(t){return b(b({},t),{},{_data_status:r(t),is_saved:true,answer_view_format:t.image_url?"text_image":"text"})}));e.question_description=(0,v.qH)(e.question_description)||"";e.answer_explanation=e.answer_explanation==='<p><br data-mce-bogus="1"></p>'?"":(0,v.qH)(e.answer_explanation)||"";switch(e.question_type){case"single_choice":{return b(b({},e),{},{_data_status:x.UPDATE,question_type:"multiple_choice",question_answers:e.question_answers.map((function(t){return b(b({},t),{},{_data_status:x.UPDATE})})),question_settings:b(b({},e.question_settings),{},{question_type:"multiple_choice",has_multiple_correct_answer:false})})}case"multiple_choice":{return b(b({},e),{},{_data_status:e.question_settings.has_multiple_correct_answer?x.NO_CHANGE:x.UPDATE,question_settings:b(b({},e.question_settings),{},{has_multiple_correct_answer:e.question_settings.has_multiple_correct_answer?!!Number(e.question_settings.has_multiple_correct_answer):true})})}case"matching":{return b(b({},e),{},{_data_status:e.question_settings.is_image_matching?x.NO_CHANGE:x.UPDATE,question_settings:b(b({},e.question_settings),{},{is_image_matching:e.question_settings.is_image_matching?!!Number(e.question_settings.is_image_matching):false})})}case"image_matching":{return b(b({},e),{},{_data_status:x.UPDATE,question_type:"matching",question_answers:e.question_answers.map((function(t){return b(b({},t),{},{_data_status:x.UPDATE})})),question_settings:b(b({},e.question_settings),{},{question_type:"matching",is_image_matching:true})})}default:return b(b({},e),{},{_data_status:x.NO_CHANGE})}};return{ID:e.ID,_data_status:x.NO_CHANGE,quiz_title:e.post_title||"",quiz_description:e.post_content||"",quiz_option:{time_limit:{time_value:e.quiz_option.time_limit.time_value||0,time_type:e.quiz_option.time_limit.time_type||"minutes"},hide_quiz_time_display:e.quiz_option.hide_quiz_time_display==="1",feedback_mode:e.quiz_option.feedback_mode||"retry",attempts_allowed:e.quiz_option.attempts_allowed||10,pass_is_required:e.quiz_option.pass_is_required==="1",passing_grade:e.quiz_option.passing_grade||80,max_questions_for_answer:e.quiz_option.max_questions_for_answer||10,quiz_auto_start:e.quiz_option.quiz_auto_start==="1",question_layout_view:e.quiz_option.question_layout_view||"",questions_order:e.quiz_option.questions_order||"rand",hide_question_number_overview:e.quiz_option.hide_question_number_overview==="1",short_answer_characters_limit:e.quiz_option.short_answer_characters_limit||200,open_ended_answer_characters_limit:e.quiz_option.open_ended_answer_characters_limit||500,content_drip_settings:e.quiz_option.content_drip_settings||{unlock_date:"",after_xdays_of_enroll:0,prerequisites:[]}},questions:(e.questions||[]).map((function(t){return n(t)})),deleted_question_ids:[],deleted_answer_ids:[]}};var S=function t(e,r,n,o){return b(b(b({course_id:o,topic_id:r,payload:{ID:e.ID,_data_status:e._data_status,post_title:e.quiz_title,post_content:e.quiz_description,quiz_option:b(b(b({attempts_allowed:e.quiz_option.attempts_allowed,feedback_mode:e.quiz_option.feedback_mode,hide_question_number_overview:e.quiz_option.hide_question_number_overview?"1":"0",hide_quiz_time_display:e.quiz_option.hide_quiz_time_display?"1":"0",max_questions_for_answer:(0,d.ro)(l.AO.H5P_INTEGRATION)&&e.questions.every((function(t){return t.question_type==="h5p"}))?e.questions.length:e.quiz_option.max_questions_for_answer,open_ended_answer_characters_limit:e.quiz_option.open_ended_answer_characters_limit,pass_is_required:e.quiz_option.pass_is_required?"1":"0",passing_grade:e.quiz_option.passing_grade,question_layout_view:e.quiz_option.question_layout_view,questions_order:e.quiz_option.questions_order,quiz_auto_start:e.quiz_option.quiz_auto_start?"1":"0",short_answer_characters_limit:e.quiz_option.short_answer_characters_limit,time_limit:{time_type:e.quiz_option.time_limit.time_type,time_value:e.quiz_option.time_limit.time_value}},(0,d.ro)(l.AO.CONTENT_DRIP)&&n==="unlock_sequentially"&&e.quiz_option.feedback_mode==="retry"&&{pass_is_required:e.quiz_option.pass_is_required?"1":"0"}),(0,d.ro)(l.AO.CONTENT_DRIP)&&{content_drip_settings:b(b(b({},n==="unlock_by_date"&&{unlock_date:e.quiz_option.content_drip_settings.unlock_date}),n==="specific_days"&&{after_xdays_of_enroll:e.quiz_option.content_drip_settings.after_xdays_of_enroll}),n==="after_finishing_prerequisites"&&{prerequisites:e.quiz_option.content_drip_settings.prerequisites})}),(0,d.ro)(l.AO.H5P_INTEGRATION)&&e.questions.every((function(t){return t.question_type==="h5p"}))&&{quiz_type:"tutor_h5p_quiz"}),questions:e.questions.map((function(t){return b(b({_data_status:t._data_status,question_id:t.question_id,question_title:t.question_title,question_description:t.question_description,question_mark:t.question_settings.question_mark},!!c.y.tutor_pro_url&&{answer_explanation:t.answer_explanation}),{},{question_type:t.question_type,question_order:t.question_order,question_settings:b(b({answer_required:t.question_settings.answer_required?"1":"0",question_mark:t.question_settings.question_mark,question_type:t.question_type,randomize_options:t.question_settings.randomize_options?"1":"0",show_question_mark:t.question_settings.show_question_mark?"1":"0"},t.question_type==="multiple_choice"&&{has_multiple_correct_answer:t.question_settings.has_multiple_correct_answer?"1":"0"}),t.question_type==="matching"&&{is_image_matching:t.question_settings.is_image_matching?"1":"0"}),question_answers:t.question_answers.map((function(e){return{_data_status:e._data_status,answer_id:e.answer_id,belongs_question_id:t.question_id,belongs_question_type:t.question_type,answer_title:e.answer_title,is_correct:e.is_correct,image_id:t.question_type==="matching"&&!t.question_settings.is_image_matching?"":e.image_id,image_url:t.question_type==="matching"&&!t.question_settings.is_image_matching?"":e.image_url,answer_two_gap_match:e.answer_two_gap_match,answer_view_format:e.answer_view_format,answer_order:e.answer_order}}))})}))},deleted_question_ids:e.deleted_question_ids,deleted_answer_ids:e.deleted_answer_ids},(0,d.ro)(l.AO.CONTENT_DRIP)&&n==="unlock_by_date"&&{"content_drip_settings[unlock_date]":e.quiz_option.content_drip_settings.unlock_date}),(0,d.ro)(l.AO.CONTENT_DRIP)&&n==="specific_days"&&{"content_drip_settings[after_xdays_of_enroll]":e.quiz_option.content_drip_settings.after_xdays_of_enroll}),(0,d.ro)(l.AO.CONTENT_DRIP)&&n==="after_finishing_prerequisites"&&{"content_drip_settings[prerequisites]":e.quiz_option.content_drip_settings.prerequisites})};var E=function t(e){return{question_id:e.question_id,question_title:e.question_title,question_description:e.question_description,question_type:e.question_type,question_mark:e.question_mark,answer_explanation:e.answer_explanation,"question_settings[question_type]":e.question_type,"question_settings[answer_required]":e.question_settings.answer_required?1:0,"question_settings[question_mark]":e.question_mark}};var j=function t(e){return f.uF.post(p.Z.ADMIN_AJAX,b({action:"quiz_import_data"},e))};var P=function t(){var e=(0,n.NL)();var r=(0,s.p)(),i=r.showToast;return(0,o.D)({mutationFn:j,onSuccess:function t(r){if(r.success){e.invalidateQueries({queryKey:["Topic"]});i({message:(0,a.__)("Quiz imported successfully","tutor"),type:"success"})}else{i({message:r.data.message,type:"danger"})}},onError:function t(e){i({message:e.response.data.message,type:"danger"})}})};var k=function t(e){return f.uF.post(p.Z.ADMIN_AJAX,{action:"quiz_export_data",quiz_id:e})};var T=function t(){var e=(0,s.p)(),r=e.showToast;return(0,o.D)({mutationFn:k,onSuccess:function t(e){if(!e.success){r({message:(0,a.__)("Something went wrong.","tutor"),type:"danger"});return}var n="";var o=y(e.data.output_quiz_data),i;try{for(o.s();!(i=o.n()).done;){var u=i.value;var s=u.join(",");n+="".concat(s,"\r\n")}}catch(t){o.e(t)}finally{o.f()}var c=new Blob([n],{type:"text/csv"});var l=window.webkitURL.createObjectURL(c);var d=document.createElement("a");d.setAttribute("href",l);d.setAttribute("download","tutor-quiz-".concat(e.data.title,".csv"));document.body.appendChild(d);d.click()},onError:function t(e){r({message:e.response.data.message,type:"danger"})}})};var A=function t(e){return f.RL.post(p.Z.SAVE_QUIZ,b({action:"tutor_quiz_builder_save"},e))};var z=function t(){var e=(0,n.NL)();var r=(0,s.p)(),i=r.showToast;return(0,o.D)({mutationFn:A,onSuccess:function t(r){if(r.data){e.setQueryData(["Quiz",r.data.ID],r.data);e.invalidateQueries({queryKey:["Topic"]});i({message:(0,a.__)(r.message,"tutor"),type:"success"})}},onError:function t(e){i({message:e.response.data.message,type:"danger"})}})};var I=function t(e){return f.uF.post(p.Z.ADMIN_AJAX,{action:"tutor_quiz_details",quiz_id:e})};var D=function t(e){return(0,i.a)({queryKey:["Quiz",e],queryFn:function t(){return I(e).then((function(t){return t.data}))},enabled:!!e})};var C=function t(e,r){if(r===e){return null}if(e===x.NEW){return x.NEW}if((e===x.UPDATE||e===x.NO_CHANGE)&&r===x.UPDATE){return x.UPDATE}return x.NO_CHANGE};var L=function t(e){return f.RL.post(p.Z.GET_H5P_QUIZ_CONTENT,{search_filter:e}).then((function(t){return t.data}))};var W=function t(e,r){return(0,i.a)({queryKey:["H5PQuizContents",e],queryFn:function t(){return L(e)},enabled:r==="tutor_h5p_quiz"})};var N=function t(e){return wpAjaxInstance.post(endpoints.GET_H5P_QUIZ_CONTENT_BY_ID,{content_id:e}).then((function(t){return t.data}))};var Q=function t(e,r){return useQuery({queryKey:["H5PQuizContent",e],queryFn:function t(){return N(e)},enabled:!!e&&r==="tutor_h5p_quiz"})};var J=function t(e){return f.uF.post(p.Z.ADMIN_AJAX,{action:"tutor_quiz_delete",quiz_id:e})};var F=function t(){var e=(0,n.NL)();var r=(0,s.p)(),i=r.showToast;return(0,o.D)({mutationFn:J,onSuccess:function t(r){if(r.status_code===200){i({message:(0,a.__)(r.message,"tutor"),type:"success"});e.invalidateQueries({queryKey:["Topic"]})}},onError:function t(e){i({message:e.response.data.message,type:"danger"})}})}},7692:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/56f20c93d8e28423f724fe4e914fbd21-3d.png"},2663:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/7a53b07b7f13e48b7b7b47dff35d9946-black-and-white.png"},8505:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/9613f2a35fc147cbde38998fc279f6e9-concept.png"},9554:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/ff5a8a3d6c18c02f00d659da3824176b-dreamy.png"},628:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/bff40839481a6e109932774fea006137-filmic.png"},7210:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/dec5e33b385ba1a7c841dde2b6c1a5af-illustration.png"},4246:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/83571e85f649c56b82349466a5b4c844-neon.png"},121:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/9dcf3f4907036dd08b31bf2a7181bed0-none.jpg"},7758:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/fc8edfd709e8f6ed349b59a0f0a00647-painting.png"},4121:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/32925d4873712d856f4abc340b3334cb-photo.png"},4446:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/fb8df26f9102747dfafc31d912d6d074-retro.png"},9463:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/7c935ca7690aecae8c42142d8cec660e-sketch.png"},9502:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/e67e28356e87045281d41cd6583f5c41-generate-image-2x.webp"},8037:(t,e,r)=>{r.d(e,{Z:()=>n});const n=r.p+"images/9c13bda85170ee68f15380378d920fd1-generate-image.webp"}}]);